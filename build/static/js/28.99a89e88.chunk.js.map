{"version":3,"sources":["components/Search/SearchProductItem.js","components/Search/SearchSortPanel.js","components/Search/VariantSearchProductItem.js","components/Search/SearchRightSide.js","pages/SearchResults.js"],"names":["SearchProductItem","item","locale","setCartMenuOpen","useIntl","deliveryCountry","React","useContext","DataProvider","useState","activeBuyOptions","setActiveBuyOptions","href","id","LazyImage","src","process","image","link","alt","translation","title","pb","className","style","height","currency","symbol","onClick","width","minHeight","padding","SearchSortPanel","handleSortBy","products","query","formatMessage","length","resolvePlural","VariantSearchProductItem","addToCartMutation","CartAndWishlistProvider","showAddButton","setShowAddButton","showOptions","setShowOptions","Object","keys","new_variation_addons","selectedVariation","setSelectedVariant","forEach","variation","selectedOption","setSelectedOption","userId","AuthProvider","showAddedToCart","setShowAddedToCart","loadingButton","setLoadingButton","handleAddToCart","a","newItem","quantity","item_id","addon_item_id","option","options","console","error","response","handleSubmitToCart","onMouseEnter","onMouseLeave","resolveImage","div","initial","opacity","animate","exit","type","color","visible","y","display","gridTemplateColumns","gap","marginTop","marginBottom","map","i","selected","prev","key","addon_item_value","substr","variationName","resolveName","promotion_price","price","SearchRightSide","productsLoading","log","speed","viewBox","backgroundColor","foregroundColor","x","rx","ry","CategoryItemLoader","SearchResults","useParams","useQuery","searchProducts","retry","data","isLoading","useMutation","sortCategories","throwOnError","onSuccess","queryCache","setQueryData","sortByMutation","sortBy","page","sort_language","res","Layout","Helmet"],"mappings":"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","file":"static/js/28.99a89e88.chunk.js","sourcesContent":["import React from 'react';\r\nimport { TiShoppingCart } from 'react-icons/ti';\r\nimport { useIntl } from 'react-intl';\r\n// import { AuthProvider } from '../../contexts/AuthContext';\r\n// import { CartAndWishlistProvider } from '../../contexts/CartAndWishlistContext';\r\nimport { DataProvider } from '../../contexts/DataContext';\r\nimport LazyImage from '../../helpers/LazyImage';\r\nexport default function SearchProductItem({ item, setCartMenuOpen }) {\r\n  // const { addToCartMutation, removeFromCartMutation } = React.useContext(\r\n  //   CartAndWishlistProvider\r\n  // );\r\n  const { locale } = useIntl();\r\n  const { deliveryCountry } = React.useContext(DataProvider);\r\n  const [activeBuyOptions, setActiveBuyOptions] = React.useState(null);\r\n  // const { userId } = React.useContext(AuthProvider);\r\n  // const [itemInCart, setItemInCart] = React.useState(false);\r\n  // const [loadingButton, setLoadingButton] = React.useState(null);\r\n  const handleBuyOptionsToggle = id => {\r\n    if (activeBuyOptions === id) {\r\n      setActiveBuyOptions(null);\r\n      return;\r\n    }\r\n    setActiveBuyOptions(id);\r\n  };\r\n  // const handleAddToCart = async newItem => {\r\n  //   setLoadingButton(newItem.id);\r\n  //   // const newItem = { id:newItem.id, quantity: quantity, size };\r\n  //   try {\r\n  //     await addToCartMutation({ newItem, userId, deliveryCountry });\r\n  //     setCartMenuOpen(true);\r\n  //     setItemInCart(true);\r\n  //     setLoadingButton(null);\r\n  //   } catch (error) {\r\n  //     setLoadingButton(null);\r\n  //     console.error(error.response);\r\n  //   }\r\n  // };\r\n  // const handleRemoveFromCart = async id => {\r\n  //   setLoadingButton(id);\r\n  //   try {\r\n  //     await removeFromCartMutation({ id, userId });\r\n  //     setItemInCart(false);\r\n  //   } catch (error) {\r\n  //     setLoadingButton(null);\r\n  //     console.error(error.response);\r\n  //   }\r\n  // };\r\n  return (\r\n    <div>\r\n      <a href={`/${locale}/c/${item.id}`}>\r\n        <LazyImage\r\n          src={`${process.env.REACT_APP_IMAGES_URL}/original/${item.image?.link}`}\r\n          alt={item.translation[locale].title}\r\n          pb=\"calc(100% * 286/210)\"\r\n        />\r\n      </a>\r\n\r\n      <div className={`bg-body-light text-body-text-light`}>\r\n        <div className=\"p-2\" style={{ height: '55px' }}>\r\n          <a\r\n            title={item.translation[locale].title}\r\n            className=\"hover:underline inline-block\"\r\n            href={`/${locale}/c/${item.id}`}\r\n          >\r\n            <h1 className=\"text-clamp-2 text-sm font-semibold\">\r\n              {item.translation[locale].title}\r\n            </h1>\r\n          </a>\r\n        </div>\r\n\r\n        <div className=\" p-2 flex items-center justify-between\">\r\n          <p className=\"   text-lg  font-semibold text-main-color whitespace-no-wrap\">\r\n            50{' '}\r\n            <span className=\"text-xs \">\r\n              {deliveryCountry?.currency.translation[locale].symbol}\r\n            </span>\r\n          </p>\r\n          <button\r\n            onClick={() => handleBuyOptionsToggle(item.id)}\r\n            className=\" rounded-full relative text-main-text z-3 \"\r\n          >\r\n            <TiShoppingCart\r\n              style={{\r\n                height: '20px',\r\n                width: '20px',\r\n              }}\r\n            />\r\n          </button>\r\n        </div>\r\n        <div style={{ minHeight: '40px', padding: '0.5rem' }}></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { useIntl } from 'react-intl';\r\n// import Select from 'react-select';\r\n// const sortByOptions = [\r\n//   { value: 'newest', label: 'Newest' },\r\n//   { label: 'Price (Low to High)', value: 'price-asc' },\r\n//   { label: 'Price (High to Low)', value: 'price-desc' },\r\n// ];\r\nexport default function SearchSortPanel({ handleSortBy, products, query }) {\r\n  // const [sortBy, setSortBy] = React.useState(null);\r\n\r\n  const { formatMessage } = useIntl();\r\n  // const handleSortByChange = selectedValue => {\r\n  //   handleSortBy(selectedValue.value);\r\n  //   setSortBy(selectedValue);\r\n  // };\r\n  const resolvePlural = () => {\r\n    switch (products.length) {\r\n      case 1:\r\n        return formatMessage({ id: 'one-search-result' });\r\n      case 2:\r\n        return formatMessage({ id: 'two-search-results' });\r\n      case products.length > 10:\r\n        return formatMessage({ id: 'more-than-10-search-results' });\r\n\r\n      default:\r\n        return formatMessage({ id: 'search-results' });\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"text-lg\">\r\n      <div>\r\n        <span className=\"text-gray-700\">{products.length}</span>\r\n        <span className=\"text-gray-700\"> {resolvePlural()}</span>{' '}\r\n        <strong>{query}</strong>{' '}\r\n      </div>\r\n      {/* <Select\r\n        isSearchable={false}\r\n        options={sortByOptions}\r\n        value={sortBy}\r\n        onChange={handleSortByChange}\r\n        placeholder=\"Sort By\"\r\n      /> */}\r\n    </div>\r\n  );\r\n}\r\n","import { AnimatePresence, motion } from 'framer-motion';\r\nimport React from 'react';\r\nimport Loader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nimport { useIntl } from 'react-intl';\r\nimport { AuthProvider } from '../../contexts/AuthContext';\r\nimport { CartAndWishlistProvider } from '../../contexts/CartAndWishlistContext';\r\nimport { DataProvider } from '../../contexts/DataContext';\r\nimport LazyImage from '../../helpers/LazyImage';\r\nexport default function VariantSearchProductItem({ item, setCartMenuOpen }) {\r\n  const { addToCartMutation } = React.useContext(CartAndWishlistProvider);\r\n  const { formatMessage, locale } = useIntl();\r\n  const { deliveryCountry } = React.useContext(DataProvider);\r\n  const [showAddButton, setShowAddButton] = React.useState(false);\r\n  const [showOptions, setShowOptions] = React.useState(false);\r\n\r\n  const [selectedVariation, setSelectedVariant] = React.useState(() => {\r\n    return Object.keys(item.new_variation_addons)[0];\r\n  });\r\n  const [selectedOption, setSelectedOption] = React.useState(() => {\r\n    let keys = {};\r\n    Object.keys(item.new_variation_addons).forEach(variation => {\r\n      keys[variation] = 0;\r\n    });\r\n    return keys;\r\n  });\r\n  const { userId } = React.useContext(AuthProvider);\r\n  const [showAddedToCart, setShowAddedToCart] = React.useState(false);\r\n  const [loadingButton, setLoadingButton] = React.useState(null);\r\n  const handleAddToCart = async () => {\r\n    const newItem = {\r\n      quantity: 1,\r\n      id: item.id,\r\n      variation: {\r\n        id: item.new_variation_addons?.[selectedVariation].id,\r\n        item_id: item.new_variation_addons?.[selectedVariation].addon_item_id,\r\n      },\r\n      option: {\r\n        id:\r\n          item.new_variation_addons?.[selectedVariation].options?.[\r\n            selectedOption[selectedVariation]\r\n          ].id,\r\n        item_id:\r\n          item.new_variation_addons?.[selectedVariation].options?.[\r\n            selectedOption[selectedVariation]\r\n          ].addon_item_id,\r\n      },\r\n    };\r\n    setLoadingButton(true);\r\n    try {\r\n      await addToCartMutation({ newItem, userId, deliveryCountry });\r\n      setCartMenuOpen(true);\r\n      setShowAddedToCart(true);\r\n      setShowOptions(false);\r\n      setLoadingButton(false);\r\n    } catch (error) {\r\n      setLoadingButton(false);\r\n      console.error(error.response);\r\n    }\r\n  };\r\n  const handleSubmitToCart = async () => {\r\n    const newItem = {\r\n      quantity: 1,\r\n      id: item.id,\r\n      variation: {\r\n        id: item.new_variation_addons?.[selectedVariation].id,\r\n        item_id: item.new_variation_addons?.[selectedVariation].addon_item_id,\r\n      },\r\n      option: {\r\n        id:\r\n          item.new_variation_addons?.[selectedVariation].options?.[\r\n            selectedOption[selectedVariation]\r\n          ].id,\r\n        item_id:\r\n          item.new_variation_addons?.[selectedVariation].options?.[\r\n            selectedOption[selectedVariation]\r\n          ].addon_item_id,\r\n      },\r\n    };\r\n    setLoadingButton(true);\r\n    try {\r\n      await addToCartMutation({ newItem, userId, deliveryCountry });\r\n      setCartMenuOpen(true);\r\n      setShowAddedToCart(true);\r\n      setShowOptions(false);\r\n      setLoadingButton(false);\r\n    } catch (error) {\r\n      setLoadingButton(false);\r\n      console.error(error.response);\r\n    }\r\n  };\r\n\r\n  const resolveAddons = () => {\r\n    if (item.new_variation_addons[selectedVariation].options) {\r\n      return Object.keys(item.new_variation_addons).map((variation, i) => {\r\n        return item.new_variation_addons[variation].options[\r\n          selectedOption[variation]\r\n        ].image ? (\r\n          <img\r\n            key={i}\r\n            onClick={() => setSelectedVariant(variation)}\r\n            className={`cursor-pointer ${\r\n              selectedVariation === variation && 'border'\r\n            }`}\r\n            alt={item.new_variation_addons[variation].id}\r\n            src={`${process.env.REACT_APP_IMAGES_URL}/small/${\r\n              item.new_variation_addons[variation].options[\r\n                selectedOption[variation]\r\n              ]?.image\r\n            }`}\r\n          />\r\n        ) : (\r\n          <button\r\n            onClick={() => setSelectedVariant(variation)}\r\n            className={`p-1 ${\r\n              selectedVariation === variation\r\n                ? 'bg-main-color text-main-text'\r\n                : ''\r\n            } rounded flex items-center justify-center`}\r\n          >\r\n            {item.new_variation_addons[variation].addon_item_value.substr(0, 1)}\r\n          </button>\r\n        );\r\n      });\r\n    } else {\r\n      return Object.keys(item.new_variation_addons).map((variation, i) => {\r\n        return item.new_variation_addons[variation].image ? (\r\n          <img\r\n            onClick={() => {\r\n              setSelectedVariant(variation);\r\n            }}\r\n            key={i}\r\n            className={`cursor-pointer ${\r\n              selectedVariation === variation && 'border'\r\n            }`}\r\n            alt={item.new_variation_addons[variation].id}\r\n            src={`${process.env.REACT_APP_IMAGES_URL}/small/${item.new_variation_addons[variation].image}`}\r\n          />\r\n        ) : (\r\n          <button\r\n            key={i}\r\n            onClick={() => setSelectedVariant(variation)}\r\n            className={`p-1 ${\r\n              selectedVariation === variation\r\n                ? 'bg-main-color text-main-text'\r\n                : ''\r\n            } rounded flex items-center justify-center`}\r\n          >\r\n            {item.new_variation_addons[variation].addon_item_value.substr(0, 1)}\r\n          </button>\r\n        );\r\n      });\r\n    }\r\n  };\r\n  const resolveImage = () => {\r\n    if (item.new_variation_addons[selectedVariation].options) {\r\n      return (\r\n        <LazyImage\r\n          src={`${process.env.REACT_APP_IMAGES_URL}/original/${\r\n            item.new_variation_addons[selectedVariation].options[\r\n              selectedOption[selectedVariation]\r\n            ]?.image || item.image?.link\r\n          }`}\r\n          alt={item.translation[locale].title}\r\n          pb=\"calc(100% * 286/210)\"\r\n        />\r\n      );\r\n    } else {\r\n      return (\r\n        <LazyImage\r\n          src={`${process.env.REACT_APP_IMAGES_URL}/original/${\r\n            item.new_variation_addons[selectedVariation].image ||\r\n            item.image?.link\r\n          }`}\r\n          alt={item.translation[locale].title}\r\n          pb=\"calc(100% * 286/210)\"\r\n        />\r\n      );\r\n    }\r\n  };\r\n\r\n  const resolveName = () => {\r\n    const variationName =\r\n      item.new_variation_addons[selectedVariation].addon_item_value;\r\n    return `${item.translation[locale].title} ${variationName}`;\r\n  };\r\n  return (\r\n    <div\r\n      onMouseEnter={() => setShowAddButton(true)}\r\n      onMouseLeave={() => {\r\n        setShowAddButton(false);\r\n        if (showOptions) {\r\n          setShowOptions(false);\r\n        }\r\n      }}\r\n    >\r\n      <div className=\"relative\">\r\n        <a href={`/${locale}/c/${item.id}`}>{resolveImage()}</a>\r\n\r\n        <AnimatePresence>\r\n          {showAddButton && (\r\n            <motion.div\r\n              initial={{ opacity: 0 }}\r\n              animate={{ opacity: 1 }}\r\n              exit={{ opacity: 0 }}\r\n              onClick={() => {\r\n                if (item.new_variation_addons[selectedVariation].options) {\r\n                  setShowOptions(true);\r\n                  setShowAddButton(false);\r\n                  return;\r\n                } else {\r\n                  handleAddToCart();\r\n                }\r\n              }}\r\n              className=\"flex items-center justify-center absolute w-full bottom-10\"\r\n            >\r\n              <button className=\" text-center rounded uppercase p-2 bg-main-color text-main-text text-sm\">\r\n                {loadingButton ? (\r\n                  <Loader\r\n                    type=\"ThreeDots\"\r\n                    color=\"#fff\"\r\n                    height={20}\r\n                    width={20}\r\n                    visible={true}\r\n                  />\r\n                ) : (\r\n                  formatMessage({ id: 'add-to-cart' })\r\n                )}\r\n              </button>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n        <AnimatePresence>\r\n          {showOptions && (\r\n            <motion.div\r\n              initial={{ opacity: 0, y: -20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -20 }}\r\n              className=\"absolute top-0 z-2 bg-body-light w-full opacity-75 p-2 border\"\r\n            >\r\n              <h1>\r\n                {formatMessage({ id: 'select' })}{' '}\r\n                {\r\n                  item.new_variation_addons[selectedVariation].options?.[\r\n                    selectedOption[selectedVariation]\r\n                  ][`name_${locale}`]\r\n                }\r\n              </h1>\r\n              <div\r\n                style={{\r\n                  display: 'grid',\r\n                  gridTemplateColumns: 'repeat(auto-fill,minmax(20px,35px))',\r\n                  gap: '0.25rem',\r\n                  marginTop: '0.5rem',\r\n                  marginBottom: '0.5rem',\r\n                  width: '100%',\r\n                }}\r\n              >\r\n                {item.new_variation_addons[selectedVariation].options?.map(\r\n                  (option, i) => {\r\n                    const selected = selectedOption[selectedVariation] === i;\r\n                    return (\r\n                      <button\r\n                        onClick={() =>\r\n                          setSelectedOption(prev => {\r\n                            return {\r\n                              ...prev,\r\n                              [selectedVariation]: i,\r\n                            };\r\n                          })\r\n                        }\r\n                        key={option.addon_item_id}\r\n                        className={`hover:bg-main-color hover:text-main-text transition duration-150 p-2 uppercase border text-sm text-center ${\r\n                          selected\r\n                            ? 'bg-main-color text-main-text'\r\n                            : 'text-body-text-light'\r\n                        } `}\r\n                      >\r\n                        {option.addon_item_value.substr(0, 1)}\r\n                      </button>\r\n                    );\r\n                  }\r\n                )}\r\n              </div>\r\n              <div className=\"w-full flex justify-center items-center \">\r\n                <button\r\n                  className={`p-2 bg-green-700 rounded text-sm text-main-text `}\r\n                  onClick={handleSubmitToCart}\r\n                >\r\n                  {loadingButton ? (\r\n                    <Loader\r\n                      type=\"ThreeDots\"\r\n                      color=\"#fff\"\r\n                      height={20}\r\n                      width={20}\r\n                      visible={true}\r\n                    />\r\n                  ) : (\r\n                    formatMessage({ id: 'submit' })\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n        <AnimatePresence>\r\n          {showAddedToCart && (\r\n            <motion.div\r\n              initial={{ opacity: 0 }}\r\n              animate={{ opacity: 1 }}\r\n              exit={{ opacity: 0 }}\r\n              className=\"absolute top-0 w-full h-full flex items-center justify-center text-main-text bg-blue-700 text-2xl\"\r\n            >\r\n              {formatMessage({ id: 'added-to-cart' })} !\r\n            </motion.div>\r\n          )}\r\n        </AnimatePresence>\r\n      </div>\r\n      <div className={`bg-body-light text-body-text-light`}>\r\n        <div className=\"p-2\" style={{ height: '55px' }}>\r\n          <a\r\n            title={item.translation[locale].title}\r\n            className=\"hover:underline inline-block\"\r\n            href={`/${locale}/c/${item.id}`}\r\n          >\r\n            <h1 className=\"font-semibold text-sm\">{resolveName()}</h1>\r\n          </a>\r\n        </div>\r\n\r\n        <div className=\"p-2 flex items-center justify-between\">\r\n          {item.new_variation_addons[selectedVariation].options ? (\r\n            item.new_variation_addons[selectedVariation].options[\r\n              selectedOption[selectedVariation]\r\n            ].promotion_price ? (\r\n              <div className=\" flex items-center\">\r\n                <h1 className=\"font-semibold text-lg text-main-color\">\r\n                  {\r\n                    item.new_variation_addons[selectedVariation].options[\r\n                      selectedOption[selectedVariation]\r\n                    ].promotion_price\r\n                  }\r\n                  <span className=\"mx-1 text-sm\">\r\n                    {deliveryCountry?.currency.translation[locale].symbol}\r\n                  </span>\r\n                </h1>\r\n                <h1 className=\" text-sm mx-1 italic  line-through text-gray-700\">\r\n                  {\r\n                    item.new_variation_addons[selectedVariation].options[\r\n                      selectedOption[selectedVariation]\r\n                    ].price\r\n                  }\r\n                  <span className=\"\">\r\n                    {deliveryCountry?.currency.translation[locale].symbol}\r\n                  </span>\r\n                </h1>\r\n              </div>\r\n            ) : (\r\n              <h1 className=\"font-semibold text-lg text-main-color\">\r\n                {\r\n                  item.new_variation_addons[selectedVariation].options[\r\n                    selectedOption[selectedVariation]\r\n                  ].price\r\n                }\r\n                <span className=\"mx-1 text-sm\">\r\n                  {deliveryCountry?.currency.translation[locale].symbol}\r\n                </span>\r\n              </h1>\r\n            )\r\n          ) : item.new_variation_addons[selectedVariation].promotion_price ? (\r\n            <div className=\" flex items-center \">\r\n              <h1 className=\"font-semibold text-main-color\">\r\n                {item.new_variation_addons[selectedVariation].promotion_price}\r\n                <span className=\"mx-1 text-sm\">\r\n                  {deliveryCountry?.currency.translation[locale].symbol}\r\n                </span>\r\n              </h1>\r\n              <h1 className=\" mx-1 text-sm  italic  line-through text-gray-700\">\r\n                {item.new_variation_addons[selectedVariation].price}\r\n                <span className=\"\">\r\n                  {deliveryCountry?.currency.translation[locale].symbol}\r\n                </span>\r\n              </h1>\r\n            </div>\r\n          ) : (\r\n            <h1 className=\"font-semibold text-main-color\">\r\n              {item.new_variation_addons[selectedVariation].price}\r\n              <span className=\"mx-1 text-sm\">\r\n                {deliveryCountry?.currency.translation[locale].symbol}\r\n              </span>\r\n            </h1>\r\n          )}\r\n        </div>\r\n        <div\r\n          className=\"p-1\"\r\n          style={{\r\n            display: 'grid',\r\n            gap: '0.2rem',\r\n            gridTemplateColumns: 'repeat(auto-fill,32px)',\r\n          }}\r\n        >\r\n          {resolveAddons()}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ContentLoader from 'react-content-loader';\r\nimport CategoryItemLoader from '../Category/CategoryItemLoader';\r\nimport SearchProductItem from './SearchProductItem';\r\nimport SearchSortPanel from './SearchSortPanel';\r\nimport VariantSearchProductItem from './VariantSearchProductItem';\r\n\r\nexport default function SearchRightSide({\r\n  products,\r\n  productsLoading,\r\n  handleSortBy,\r\n  query,\r\n}) {\r\n  console.log(products);\r\n  if (productsLoading) {\r\n    return (\r\n      <div>\r\n        <ContentLoader\r\n          speed={2}\r\n          viewBox=\"0 0 752 25\"\r\n          backgroundColor=\"#f3f3f3\"\r\n          foregroundColor=\"#ecebeb\"\r\n        >\r\n          <rect x=\"0\" y=\"0\" rx=\"5\" ry=\"5\" width=\"100%\" height=\"25\" />\r\n        </ContentLoader>\r\n        <div className=\"search-page-items__grid py-2  min-h-screen\">\r\n          {[0, 1, 2, 3, 4, 5, 6, 7, 8].map(i => {\r\n            return <CategoryItemLoader key={i} />;\r\n          })}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div>\r\n      <SearchSortPanel\r\n        handleSortBy={handleSortBy}\r\n        products={products}\r\n        query={query}\r\n      />\r\n      {products.length !== 0 && (\r\n        <div className=\"search-page-items__grid py-2 \">\r\n          {products.map(item => {\r\n            return item.type === 'simple' ? (\r\n              <SearchProductItem key={item.id} item={item} query={query} />\r\n            ) : (\r\n              <VariantSearchProductItem key={item.id} item={item} />\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { Helmet } from 'react-helmet';\r\n// import Breadcrumbs from '../components/SingleProduct/Breadcrumbs';\r\n// import { SearchProvider } from '../contexts/SearchContext';\r\nimport Layout from '../components/Layout';\r\nimport { queryCache, useMutation, useQuery } from 'react-query';\r\nimport { useParams } from 'react-router-dom';\r\nimport { searchProducts, sortCategories } from '../Queries/Queries';\r\nimport { useIntl } from 'react-intl';\r\nimport SearchRightSide from '../components/Search/SearchRightSide';\r\nexport default function SearchResults() {\r\n  const { query } = useParams();\r\n  const { locale } = useIntl();\r\n\r\n  /**\r\n   * Main Fetch\r\n   */\r\n\r\n  const { data: products, isLoading: productsLoading } = useQuery(\r\n    ['searchProducts', query],\r\n    searchProducts,\r\n    { retry: true }\r\n  );\r\n  // const { data: categoryInfo, isLoading: categoryInfoLoading } = useQuery(\r\n  //   ['categoryInfo', query],\r\n  //   getSingleCategoryInfo,\r\n  //   { retry: true }\r\n  // );\r\n  const [sortByMutation] = useMutation(\r\n    async query => {\r\n      return await sortCategories(query);\r\n    },\r\n    {\r\n      throwOnError: true,\r\n      onSuccess: data => {\r\n        console.log(data);\r\n        queryCache.setQueryData(['categoryProducts', query], () => {\r\n          return data;\r\n        });\r\n      },\r\n    }\r\n  );\r\n  const handleSortBy = async sortBy => {\r\n    try {\r\n      // console.log(categoryInfo.id);\r\n      const query = {\r\n        page: 1,\r\n        // category: categoryInfo.id,\r\n        sortBy,\r\n        sort_language: locale,\r\n      };\r\n      const res = await sortByMutation(query);\r\n      console.log(res);\r\n    } catch (error) {\r\n      console.log(error.response);\r\n    }\r\n  };\r\n  return (\r\n    <Layout>\r\n      <Helmet>\r\n        <title>{query}</title>\r\n      </Helmet>\r\n      <div className=\"max-w-default mx-auto p-4 overflow-hidden\">\r\n        <SearchRightSide\r\n          products={products}\r\n          productsLoading={productsLoading}\r\n          // categoryInfoLoading={categoryInfoLoading}\r\n          handleSortBy={handleSortBy}\r\n          query={query}\r\n        />\r\n      </div>\r\n    </Layout>\r\n  );\r\n}\r\n"],"sourceRoot":""}