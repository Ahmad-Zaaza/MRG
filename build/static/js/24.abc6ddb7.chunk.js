(this.webpackJsonpattiahmall=this.webpackJsonpattiahmall||[]).push([[24],{276:function(e,t,a){"use strict";a.d(t,"a",(function(){return T}));var l=a(2),n=a(1),r=a.n(n),s=a(8),c=a.n(s),i=a(15),o=a.n(i),m=(a(33),a(153)),d=a(104),u=a(154),b=a(45),p=a(35),h=a(3),f=a.n(h),E=a(16),v=a(6),x=a(28),g=a(63),y=a(21),N=a(46),k=a(20),w=a(54),j=a(5),O=[{value:"+965",label:"+965"},{value:"+966",label:"+966"}];function C(e){var t=e.markerAddress,a=e.setShowMap,n=e.marker,s=e.setMarker,c=r.a.useState(O[0]),i=Object(l.a)(c,2),m=i[0],d=i[1],u=r.a.useContext(k.a).addAddressMutation,b=r.a.useState(""),p=Object(l.a)(b,2),h=p[0],N=p[1],C=r.a.useState(!1),M=Object(l.a)(C,2),z=M[0],q=M[1],T=Object(g.a)().formatMessage,D=r.a.useState(!1),F=Object(l.a)(D,2),H=F[0],L=F[1],U=y.a({apartmentOrHouseNumber:y.c().required(T({id:"required-field"})),buildingOrTowerNumber:y.c().required(T({id:"required-field"})),addressName:y.c().required(T({id:"required-field"})),phoneNumber:y.c().matches(/^\d+$/,T({id:"number-only"})).required(T({id:"required-field"})),additionalDetails:y.c()});return r.a.createElement("div",null,r.a.createElement(j.a,null,z&&r.a.createElement(w.a,{message:T({id:"something-went-wrong-snackbar"}),closeFunction:function(){q(!1)}})),r.a.createElement("div",{className:"font-bold p-2"},r.a.createElement("h1",null,T({id:"location-details"}))),r.a.createElement("div",{className:"p-2"},r.a.createElement("div",{className:"flex justify-between"},r.a.createElement("label",{htmlFor:"location",className:"text-sm font-semibold text-gray-700"},T({id:"delivery-location"})),r.a.createElement("button",{onClick:function(){s(null),N("")},className:"text-main-color hover:underline"},T({id:"clear"}))),r.a.createElement("textarea",{rows:"3",id:"location",className:" mt-1 w-full rounded border  p-1  ",type:"textarea",value:t||h,readOnly:t,onChange:function(e){return N(e.target.value)}}),r.a.createElement(x.a,{initialValues:{apartmentOrHouseNumber:"",buildingOrTowerNumber:"",phoneNumber:"",additionalDetails:"",addressName:""},validationSchema:U,onSubmit:function(){var e=Object(v.a)(f.a.mark((function e(l){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u({lat:null===n||void 0===n?void 0:n.lat,lng:null===n||void 0===n?void 0:n.lng,defaultLocation:H,addressDetails:Object(E.a)({phoneNumber:"".concat(m.value).concat(l.phoneNumber)},l,{markerAddress:t,userTyped_address:h})});case 3:a(!1),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),q(!0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},(function(e){var t=e.handleSubmit,a=e.values,l=e.isSubmitting;return r.a.createElement("form",{onSubmit:t},r.a.createElement(_,{label:T({id:"maps-detailed-address-phone"}),name:"phoneNumber",value:a.phoneNumber,type:"text",countryCode:m,setCountryCode:d}),r.a.createElement("div",{className:"grid grid-cols-2 gap-1"},r.a.createElement(S,{label:T({id:"maps-detailed-address-apartment"}),name:"apartmentOrHouseNumber",value:a.apartmentOrHouseNumber,type:"text"}),r.a.createElement(S,{label:T({id:"maps-detailed-address-building"}),name:"buildingOrTowerNumber",value:a.buildingOrTowerNumber,type:"text"})),r.a.createElement(S,{label:T({id:"maps-detailed-address-name"}),name:"addressName",value:a.addressName,type:"text"}),r.a.createElement(A,{label:T({id:"maps-details-extra-details"}),name:"additionalDetails",value:a.additionalDetails}),r.a.createElement("div",{className:" "},r.a.createElement("div",{className:"flex items-center mb-2"},r.a.createElement("label",null,T({id:"mark-as-default"})),r.a.createElement("input",{className:" mx-2",type:"checkbox",checked:H,onChange:function(){return L(!H)}})),r.a.createElement("button",{type:"submit",className:"bg-main-color text-main-text p-2 rounded  w-full  flex items-center uppercase justify-center font-semibold"},l?r.a.createElement(o.a,{type:"ThreeDots",color:"#fff",height:23,width:23,visible:l}):r.a.createElement("h1",null,T({id:"confirm-btn"})))))}))))}var S=function(e){var t=e.label,a=(e.value,e.name),n=Object(p.a)(e,["label","value","name"]),s=Object(x.b)(a),c=Object(l.a)(s,2),i=c[0],o=c[1];return r.a.createElement("div",{className:"w-full mb-1 relative"},r.a.createElement("label",{htmlFor:a,className:"text-sm font-semibold text-gray-700"},t),r.a.createElement("input",Object.assign({},i,n,{onBlur:function(e){i.onBlur(e)},className:" w-full rounded-sm border   p-1"})),o.touched&&o.error?r.a.createElement("h1",{className:"text-xs text-main-color mt-1"},o.error):r.a.createElement("h1",{className:"text-xs text-main-color mt-1",style:{height:"18px"}}," "))},A=function(e){var t=e.label,a=(e.value,e.name),n=Object(p.a)(e,["label","value","name"]),s=Object(x.b)(a),c=Object(l.a)(s,1)[0],i=Object(g.a)().formatMessage;return r.a.createElement("div",{className:"w-full mb-1 relative"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement("label",{htmlFor:a,className:"text-sm font-semibold text-gray-700"},t),r.a.createElement("h1",{className:"text-xs italic mx-3"},"(",i({id:"maps-details-optional"}),")")),r.a.createElement("textarea",Object.assign({rows:3},c,n,{onBlur:function(e){c.onBlur(e)},className:" w-full rounded-sm border   p-1"})))},_=function(e){var t=e.label,a=(e.value,e.name),n=e.countryCode,s=e.setCountryCode,c=Object(p.a)(e,["label","value","name","countryCode","setCountryCode"]),i=Object(x.b)(a),o=Object(l.a)(i,2),m=o[0],d=o[1];return r.a.createElement("div",{className:"w-full mb-1 flex flex-col "},r.a.createElement("label",{htmlFor:a,className:"text-sm font-semibold text-gray-800 mb-1"},t),r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"0.4fr 1fr",gap:"0.5rem"}},r.a.createElement(N.a,{options:O,isSearchable:!1,value:n,onChange:s,styles:{dropdownIndicator:function(e){return Object(E.a)({},e,{padding:"0.25rem"})},valueContainer:function(e){return Object(E.a)({},e,{padding:"0.5rem"})}}}),r.a.createElement("input",Object.assign({},m,c,{onBlur:function(e){m.onBlur(e)},className:" border rounded w-full p-2 ".concat(d.error&&"border-main-color")}))),d.touched&&d.error?r.a.createElement("h1",{className:"text-xs text-main-color mt-1"},d.error):r.a.createElement("h1",{className:"text-xs text-main-color mt-1",style:{height:"18px"}}," "))},M=["places"],z={lat:29.3759,lng:47.9774},q={styles:m.a,disableDefaultUI:!0,zoomControl:!0};function T(e){var t=e.setShowMap,a=Object(b.useMediaQuery)({query:"(min-width: 768px)"}),n=Object(g.a)().formatMessage,s=Object(d.d)({googleMapsApiKey:"AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg",libraries:M}),i=s.isLoaded,m=s.loadError,p=r.a.useState(null),h=Object(l.a)(p,2),f=h[0],E=h[1],v=r.a.useState(null),x=Object(l.a)(v,2),y=x[0],N=x[1],k=r.a.useState(null),w=Object(l.a)(k,2),j=w[0],O=w[1],S=r.a.useRef(),A=r.a.useCallback((function(e){S.current=e}),[]),_=r.a.useCallback((function(e){var t=e.lat,a=e.lng;S.current.panTo({lat:t,lng:a}),E({lat:t,lng:a}),N(null)}),[]);return r.a.useEffect((function(){f?c.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(f.lat,",").concat(f.lng,"&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg")).then((function(e){console.log(e.data),O("".concat(e.data.results[0].formatted_address)),N("".concat(e.data.results[0].address_components.map((function(e){return e.short_name})).join(", ")))})).catch((function(e){return console.log(e)})):(O(null),N(null))}),[f]),m?r.a.createElement("div",{className:"flex justify-center items-center",style:{height:"calc(-173px + 100vh)"}},r.a.createElement("h1",null,n({id:"error-loading-maps"}))):i?r.a.createElement("div",{className:"".concat(a?"my-addresses-desktop-maps__grid":"my-addresses-mobile-maps__grid")},r.a.createElement("div",{className:"relative h-full"},r.a.createElement(u.a,{panTo:_,markerAddress:j}),r.a.createElement(d.a,{mapContainerStyle:{width:"100%",height:a?"100%":"500px"},zoom:15,center:z,options:q,clickableIcons:!1,onLoad:A,onClick:function(e){E({lat:e.latLng.lat(),lng:e.latLng.lng()})}},f&&r.a.createElement(d.c,{position:{lat:null===f||void 0===f?void 0:f.lat,lng:null===f||void 0===f?void 0:f.lng}}),y&&r.a.createElement(d.b,{onCloseClick:function(){return N(null)},position:{lat:null===f||void 0===f?void 0:f.lat,lng:null===f||void 0===f?void 0:f.lng},options:{pixelOffset:new window.google.maps.Size(0,-50)}},r.a.createElement("div",{className:"p-2"},r.a.createElement("div",null,r.a.createElement("h1",null,y)))))),r.a.createElement(C,{markerAddress:j,marker:f,setShowMap:t,setMarker:E})):r.a.createElement("div",{className:"flex justify-center items-center",style:{height:"calc(-176px + 100vh)"}},r.a.createElement(o.a,{type:"ThreeDots",color:"#b72b2b",height:40,width:40,visible:!i}))}},332:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return L}));var l=a(3),n=a.n(l),r=a(6),s=a(30),c=a(16),i=a(2),o=a(1),m=a.n(o),d=a(174),u=a(22),b=a(63),p=a(110),h=a.n(p),f=a(111),E=a.n(f),v=a(15),x=a.n(v),g=(a(33),a(113)),y=a.n(g),N=a(112),k=a.n(N),w=a(7);function j(e){var t=e.handleStepBack,a=e.selectedAddress,l=e.paymentMethod,n=e.setPaymentMethod,r=e.handleCheckout,s=e.checkoutLoading,c=Object(b.a)().formatMessage,i=m.a.useContext(w.a).deliveryCountry,o=function(e){n(e)};return m.a.createElement("div",{className:"h-full  "},m.a.createElement("div",{className:" mb-2 border h-full  "},m.a.createElement("div",{className:"quick-checkout-personal-info-mobile__container p-2"},m.a.createElement("div",{className:"flex flex-col justify-center font-semibold text-sm  "},m.a.createElement("div",{className:"relative  mb-4 "},m.a.createElement("h1",null,c({id:"selected-address"})),m.a.createElement("div",{className:"my-1 p-2 border rounded-lg flex"},m.a.createElement("div",{className:"flex-1"},m.a.createElement("div",{className:""},m.a.createElement("h1",{className:"text-gray-600"},c({id:"maps-detailed-address-street_neighborhood_governate"}),":"),m.a.createElement("h1",null,a.marked_address)),m.a.createElement("div",{className:""},m.a.createElement("h1",{className:"text-gray-600"},c({id:"maps-detailed-address-apartment"}),":"),m.a.createElement("h1",null,a.apartment_house_number)),m.a.createElement("div",{className:""},m.a.createElement("h1",{className:"text-gray-600"},c({id:"maps-detailed-address-building"})," ",":"," "),m.a.createElement("h1",null,a.building_tower_number)),m.a.createElement("div",{className:""},m.a.createElement("h1",{className:"text-gray-600"},c({id:"maps-details-extra-details"})," ",":"," "),m.a.createElement("h1",null,a.addition_direction||" - "))),m.a.createElement("div",null,m.a.createElement("img",{src:"https://maps.googleapis.com/maps/api/staticmap?center=".concat(a.lat,",").concat(a.lng,"&zoom=15&size=200x200&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg"),alt:"thumbnail"}))))),m.a.createElement("div",{className:"font-semibold self-start"},m.a.createElement("div",{className:" mb-4 relative  "},m.a.createElement("h1",{className:""}," ",c({id:"select-payment-method"})),m.a.createElement("div",{className:"mt-1"},m.a.createElement("div",{className:"flex flex-col "},function(){var e=[];if(i)return i.payment.forEach((function(t){if(0===t.status)return null;"knet"===t.key&&e.push(m.a.createElement("button",{key:t.key,onClick:function(){return o(t.key)},className:" ".concat(l===t.key&&"bg-main-color text-main-text border-main-color"," mb-3 flex border items-center justify-start rounded p-2 font-semibold")},m.a.createElement("img",{src:h.a,alt:t.key}),m.a.createElement("div",{className:"flex-1 mx-3 text-left"},"K-net"),m.a.createElement("div",null,l===t.key?m.a.createElement(u.j,{className:"w-6 h-6 text-btn-secondary-light"}):m.a.createElement(u.i,{className:"w-6 h-6 text-btn-primary-light"})))),"credit"===t.key&&e.push(m.a.createElement("button",{key:t.key,onClick:function(){return o(t.key)},className:" ".concat(l===t.key&&"bg-main-color text-main-text border-main-color"," mb-3 flex border items-center justify-start rounded p-2 font-semibold")},m.a.createElement("img",{src:E.a,alt:t.key}),m.a.createElement("div",{className:"flex-1 mx-3 text-left"},"Credit Card"),m.a.createElement("div",null,l===t.key?m.a.createElement(u.j,{className:"w-6 h-6 text-btn-secondary-light"}):m.a.createElement(u.i,{className:"w-6 h-6 text-btn-primary-light"})))),"amex"===t.key&&e.push(m.a.createElement("button",{key:t.key,onClick:function(){return o(t.key)},className:" ".concat(l===t.key&&"bg-main-color text-main-text border-main-color"," mb-3 flex border items-center justify-start rounded p-2 font-semibold")},m.a.createElement("img",{src:k.a,alt:t.key}),m.a.createElement("div",{className:"flex-1 mx-3 text-left"},"American Express"),m.a.createElement("div",null,l===t.key?m.a.createElement(u.j,{className:"w-6 h-6 text-btn-secondary-light"}):m.a.createElement(u.i,{className:"w-6 h-6 text-btn-primary-light"})))),"cod"===t.key&&e.push(m.a.createElement("button",{key:t.key,onClick:function(){return o(t.key)},className:" ".concat(l===t.key&&"bg-main-color text-main-text border-main-color"," mb-3 flex border items-center justify-start rounded p-2 font-semibold")},m.a.createElement("img",{src:y.a,alt:t.key}),m.a.createElement("div",{className:"flex-1 mx-3 text-left"},"Cash on Delivery"),m.a.createElement("div",null,l===t.key?m.a.createElement(u.j,{className:"w-6 h-6 text-btn-secondary-light"}):m.a.createElement(u.i,{className:"w-6 h-6 text-btn-primary-light"}))))})),e}()))))),m.a.createElement("div",{className:"flex justify-end items-center p-2"},m.a.createElement("button",{className:"px-3 py-1 bg-main-color text-main-text rounded font-semibold mr-3",onClick:t},c({id:"btn-back-to-addresses"})),m.a.createElement("button",{disabled:!l,className:"\n              ".concat(l?"bg-main-color text-main-text":"bg-gray-600 text-gray-100","\n             flex items-center justify-center uppercase px-3 py-1 mx-3  rounded font-semibold"),onClick:r},s?m.a.createElement(x.a,{type:"ThreeDots",color:"#fff",height:24,width:24,visible:!0}):c({id:"proceed-to-payment"})))))}var O=a(175),C=a(82),S=a(20),A=a(276),_=a(5),M=a(23),z=a(103),q=a.n(z);function T(e){var t=e.userAddresses,a=e.setShowMap,l=e.selectedAddress,n=e.setSelectedAddress,r=e.handleStepForward,s=Object(b.a)().formatMessage,c=m.a.useState(null),o=Object(i.a)(c,2),d=o[0],u=o[1],p={partial:{right:0,top:0,bottom:0,width:"20%"},full:{right:0,top:0,bottom:0,width:"100%"}};return m.a.createElement("div",{className:"min-h-full"},m.a.createElement("div",{className:" p-2 flex items-center justify-between bg-main-color text-main-text"},m.a.createElement("h1",{className:"text-sm font-semibold"},s({id:"select-address-header"})),m.a.createElement("button",{onClick:r,className:"".concat(l?"bg-body-light text-main-color":"bg-gray-600 cursor-not-allowed"," rounded p-1 text-xs uppercase font-semibold "),disabled:!l},s({id:"btn-proceed"}))),m.a.createElement(_.b,null,m.a.createElement(_.c.div,{layout:!0,className:"p-2 locations-grid__mobile"},t.map((function(e){return m.a.createElement(_.c.div,{layout:!0,key:e.id,className:"".concat((null===l||void 0===l?void 0:l.id)===e.id&&"shadow-itemsSlider-shallow"," rounded border relative  bg-body-light")},m.a.createElement(_.c.div,{layout:!0},m.a.createElement("div",{style:{position:"relative"}},m.a.createElement("img",{src:"https://maps.googleapis.com/maps/api/staticmap?center=".concat(e.lat,",").concat(e.lng,"&zoom=15&size=350x250&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg"),alt:"thumbnail"}),m.a.createElement(_.c.div,{variants:p,initial:"partial",animate:d===e.id?"full":"partial",layout:!0,exit:"partial",onClick:function(){return t=e.id,void u(d===t?null:t);var t},className:"absolute overflow-hidden p-2 text-main-text  transition cursor-pointer duration-150 opacity-75 bg-gray-800"},m.a.createElement(M.m,{style:{left:"10px"},className:"absolute  top-1/2 transform  -translate-y-1/2  w-5 h-5"}),m.a.createElement(_.a,null,d===e.id&&m.a.createElement(_.c.div,{initial:{opacity:0},animate:{opacity:1,marginLeft:"35px"},exit:{opacity:0},layout:!0,className:"text-xs"},m.a.createElement("div",null,m.a.createElement("h1",null,s({id:"maps-detailed-address-apartment-short"}),":"),m.a.createElement("h1",null,e.apartment_house_number)),m.a.createElement("div",null,m.a.createElement("h1",null,s({id:"maps-detailed-address-building-short"}),":"),m.a.createElement("h1",null,e.building_tower_number)),m.a.createElement("div",null,m.a.createElement("h1",null,s({id:"maps-detailed-address-phone-short"}),":"),m.a.createElement("h1",null,e.phone_number)))))),m.a.createElement("div",{className:"p-1"},m.a.createElement("div",{className:"text-xs mb-2 font-semibold",style:{height:"50px"}},m.a.createElement("h1",null,e.marked_address)),m.a.createElement("button",{onClick:function(){return function(e){(null===l||void 0===l?void 0:l.id)===e.id?n(null):n(e)}(e)},className:"w-full text-sm p-1 rounded uppercase ".concat((null===l||void 0===l?void 0:l.id)===e.id?"bg-green-700 shadow":"bg-main-color"," text-main-text")},(null===l||void 0===l?void 0:l.id)===e.id?s({id:"selected-btn"}):s({id:"select-btn"})))))})),m.a.createElement("div",{className:"p-3 flex items-center justify-center "},m.a.createElement("button",{onClick:function(){return a(!0)},className:"p-3 flex items-center justify-center place-self-center justify-self-center bg-main-color hover:bg-red-900 transition duration-150 relative rounded-lg text-main-text"},m.a.createElement(q.a,{background:!0}),m.a.createElement(M.p,{className:"h-8 w-8"}))))))}function D(e){var t=e.handleStepForward,a=e.selectedAddress,l=e.setSelectedAddress,n=m.a.useState(!1),r=Object(i.a)(n,2),s=r[0],c=r[1],o=m.a.useContext(S.a),d=o.userAddresses;return o.userAddressesLoading?m.a.createElement("div",{className:"flex h-full justify-center items-center",style:{minHeight:"calc(100vh - 102px)"}},m.a.createElement(x.a,{type:"ThreeDots",color:"#b72b2b",height:40,width:40,visible:!0})):m.a.createElement("div",{className:"h-full"},0!==d.length&&!s&&m.a.createElement(T,{userAddresses:d,setShowMap:c,selectedAddress:a,setSelectedAddress:l,handleStepForward:t}),(0===d.length||s)&&m.a.createElement("div",{className:" border mb-2 h-full"},m.a.createElement(A.a,{setShowMap:c,handleStepForward:t})))}var F=a(17),H=a(10);function L(){var e=m.a.useContext(w.a).deliveryCountry,t=m.a.useState(0),a=Object(i.a)(t,2),l=a[0],o=a[1],u=m.a.useState(null),b=Object(i.a)(u,2),p=b[0],h=b[1],f=m.a.useState(null),E=Object(i.a)(f,2),v=E[0],x=E[1],g=Object(H.b)(F.h,{throwOnError:!0}),y=Object(i.a)(g,2),N=y[0],k=y[1].isLoading,S=m.a.useState({0:!1,1:!1,2:!1}),A=Object(i.a)(S,2),_=A[0],M=A[1],z=function(){var t=Object(r.a)(n.a.mark((function t(){var a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={address:p.id,payment_method:v,order_type:"Kuwait"===(null===e||void 0===e?void 0:e.translation.en)?"local":"international"},t.prev=1,t.next=4,N({deliveryCountry:e,order:a});case 4:o(2),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0.response);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}();return m.a.useEffect((function(){window.scrollTo(0,0)}),[l]),m.a.createElement(C.a,null,m.a.createElement("div",{className:"xxl:max-w-default md:max-w-screen-xl mx-auto"},m.a.createElement(O.a,{selectedStep:l,stepDone:_}),m.a.createElement("div",{className:"mb-3",style:{minHeight:"calc(100vh - 150px)"}},0===l&&m.a.createElement(D,{handleStepForward:function(){2!==l&&(o(l+1),M(Object(c.a)({},_,Object(s.a)({},l,!0))))},selectedAddress:p,setSelectedAddress:h}),1===l&&m.a.createElement(j,{handleStepBack:function(){0!==l&&(o(l-1),M(Object(c.a)({},_,Object(s.a)({},l-1,!1))))},selectedAddress:p,paymentMethod:v,setPaymentMethod:x,handleCheckout:z,checkoutLoading:k}),2===l&&m.a.createElement(d.a,null))))}}}]);
//# sourceMappingURL=24.abc6ddb7.chunk.js.map