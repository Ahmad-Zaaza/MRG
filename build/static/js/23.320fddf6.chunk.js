(this.webpackJsonpattiahmall=this.webpackJsonpattiahmall||[]).push([[23],{272:function(e,a,t){"use strict";t.d(a,"a",(function(){return z}));var l=t(2),n=t(1),r=t.n(n),s=t(7),c=t.n(s),i=t(15),o=t.n(i),m=(t(36),t(144)),d=t(105),u=t(145),b=t(59),p=t(32),h=t(3),f=t.n(h),E=t(14),v=t(5),g=t(25),x=t(67),N=t(19),y=t(50),w=t(21),j=[{value:"+965",label:"+965"},{value:"+966",label:"+966"}];function O(e){var a=e.markerAddress,t=e.setShowMap,n=e.marker,s=r.a.useState(j[0]),c=Object(l.a)(s,2),i=c[0],m=c[1],d=r.a.useContext(w.a).addAddressMutation,u=Object(x.a)().formatMessage,b=r.a.useState(!1),p=Object(l.a)(b,2),h=p[0],y=p[1],O=N.b({apartmentOrHouseNumber:N.a().required(u({id:"required-field"})),buildingOrTowerNumber:N.a().required(u({id:"required-field"})),addressName:N.d().required(u({id:"required-field"})),phoneNumber:N.d().matches(/^\d+$/,u({id:"number-only"})).required(u({id:"required-field"})),additionalDetails:N.d()});return r.a.createElement("div",null,r.a.createElement("div",{className:"font-bold p-2"},r.a.createElement("h1",null,u({id:"location-details"}))),r.a.createElement("div",{className:"p-2"},r.a.createElement(g.a,{initialValues:{apartmentOrHouseNumber:"",buildingOrTowerNumber:"",phoneNumber:"",additionalDetails:"",addressName:""},validationSchema:O,onSubmit:function(){var e=Object(v.a)(f.a.mark((function e(l){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d({lat:n.lat,lng:n.lng,defaultLocation:h,addressDetails:Object(E.a)({phoneNumber:"".concat(i.value).concat(l.phoneNumber)},l,{markerAddress:a})});case 3:t(!1),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.response);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a){return e.apply(this,arguments)}}()},(function(e){var t=e.handleSubmit,l=e.values,n=e.isSubmitting;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",{className:"grid grid-cols-2 gap-1"},r.a.createElement(k,{label:u({id:"maps-detailed-address-apartment"}),name:"apartmentOrHouseNumber",value:l.apartmentOrHouseNumber,type:"text"}),r.a.createElement(k,{label:u({id:"maps-detailed-address-building"}),name:"buildingOrTowerNumber",value:l.buildingOrTowerNumber,type:"text"})),r.a.createElement(k,{label:u({id:"maps-detailed-address-name"}),name:"addressName",value:l.addressName,type:"text"}),r.a.createElement(S,{label:u({id:"maps-details-extra-details"}),name:"additionalDetails",value:l.additionalDetails}),r.a.createElement(C,{label:u({id:"maps-detailed-address-phone"}),name:"phoneNumber",value:l.phoneNumber,type:"text",countryCode:i,setCountryCode:m}),r.a.createElement("div",{className:" "},r.a.createElement("div",{className:"flex items-center mb-2"},r.a.createElement("label",null,u({id:"mark-as-default"})),r.a.createElement("input",{className:" mx-2",type:"checkbox",checked:h,onChange:function(){return y(!h)}})),r.a.createElement("button",{type:"submit",disabled:!a,className:"".concat(a?n?"bg-gray-300 text-main-text":"bg-main-color text-main-text":"btn-disabled","   p-2 rounded  w-full  flex items-center justify-center font-semibold")},n?r.a.createElement(o.a,{type:"ThreeDots",color:"#b72b2b",height:20,width:20,visible:n}):r.a.createElement("h1",null,u({id:"confirm-location"})))))}))))}var k=function(e){var a=e.label,t=(e.value,e.name),n=Object(p.a)(e,["label","value","name"]),s=Object(g.b)(t),c=Object(l.a)(s,2),i=c[0],o=c[1];return r.a.createElement("div",{className:"w-full mb-1 relative"},r.a.createElement("label",{htmlFor:t,className:"text-sm font-semibold text-gray-700"},a),r.a.createElement("input",Object.assign({},i,n,{onBlur:function(e){i.onBlur(e)},className:" w-full rounded-sm border   p-1"})),o.touched&&o.error?r.a.createElement("h1",{className:"text-xs text-main-color mt-1"},o.error):r.a.createElement("h1",{className:"text-xs text-main-color mt-1",style:{height:"18px"}}," "))},S=function(e){var a=e.label,t=(e.value,e.name),n=Object(p.a)(e,["label","value","name"]),s=Object(g.b)(t),c=Object(l.a)(s,1)[0],i=Object(x.a)().formatMessage;return r.a.createElement("div",{className:"w-full mb-1 relative"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement("label",{htmlFor:t,className:"text-sm font-semibold text-gray-700"},a),r.a.createElement("h1",{className:"text-xs italic mx-3"},"(",i({id:"maps-details-optional"}),")")),r.a.createElement("textarea",Object.assign({rows:3},c,n,{onBlur:function(e){c.onBlur(e)},className:" w-full rounded-sm border   p-1"})))},C=function(e){var a=e.label,t=(e.value,e.name),n=e.countryCode,s=e.setCountryCode,c=Object(p.a)(e,["label","value","name","countryCode","setCountryCode"]),i=Object(g.b)(t),o=Object(l.a)(i,2),m=o[0],d=o[1];return r.a.createElement("div",{className:"w-full mb-1 flex flex-col "},r.a.createElement("label",{htmlFor:t,className:"text-sm font-semibold text-gray-800 mb-1"},a),r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"0.4fr 1fr",gap:"0.5rem"}},r.a.createElement(y.a,{options:j,isSearchable:!1,value:n,onChange:s,styles:{dropdownIndicator:function(e){return Object(E.a)({},e,{padding:"0.25rem"})},valueContainer:function(e){return Object(E.a)({},e,{padding:"0.5rem"})}}}),r.a.createElement("input",Object.assign({},m,c,{onBlur:function(e){m.onBlur(e)},className:" border rounded w-full p-2 ".concat(d.error&&"border-main-color")}))),d.touched&&d.error?r.a.createElement("h1",{className:"text-xs text-main-color mt-1"},d.error):r.a.createElement("h1",{className:"text-xs text-main-color mt-1",style:{height:"18px"}}," "))},A=["places"],_={lat:29.3759,lng:47.9774},M={styles:m.a,disableDefaultUI:!0,zoomControl:!0};function z(e){var a=e.setShowMap,t=Object(b.useMediaQuery)({query:"(min-width: 768px)"}),n=Object(d.d)({googleMapsApiKey:"AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg",libraries:A}),s=n.isLoaded,i=n.loadError,m=r.a.useState(null),p=Object(l.a)(m,2),h=p[0],f=p[1],E=r.a.useState(null),v=Object(l.a)(E,2),g=v[0],x=v[1],N=r.a.useState(null),y=Object(l.a)(N,2),w=y[0],j=y[1],k=r.a.useRef(),S=r.a.useCallback((function(e){k.current=e}),[]),C=r.a.useCallback((function(e){var a=e.lat,t=e.lng;k.current.panTo({lat:a,lng:t}),f({lat:a,lng:t}),x(null)}),[]);return r.a.useEffect((function(){h&&c.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(h.lat,",").concat(h.lng,"&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg")).then((function(e){console.log(e.data),j("".concat(e.data.results[0].formatted_address)),x("".concat(e.data.results[0].address_components.map((function(e){return e.short_name})).join(", ")))})).catch((function(e){return console.log(e)}))}),[h]),i?r.a.createElement("div",{className:"flex justify-center items-center",style:{height:"calc(-173px + 100vh)"}},r.a.createElement("h1",null,"There was an Error loading maps, Please try again ")):s?r.a.createElement("div",{className:"".concat(t?"my-addresses-desktop-maps__grid":"my-addresses-mobile-maps__grid")},r.a.createElement("div",{className:"relative h-full"},r.a.createElement(u.a,{panTo:C,markerAddress:w}),r.a.createElement(d.a,{mapContainerStyle:{width:"100%",height:t?"100%":"500px"},zoom:15,center:_,options:M,clickableIcons:!1,onLoad:S,onClick:function(e){f({lat:e.latLng.lat(),lng:e.latLng.lng()})}},h&&r.a.createElement(d.c,{position:{lat:h.lat,lng:h.lng}}),g&&r.a.createElement(d.b,{onCloseClick:function(){return x(null)},position:{lat:h.lat,lng:h.lng},options:{pixelOffset:new window.google.maps.Size(0,-50)}},r.a.createElement("div",{className:"p-2"},r.a.createElement("div",null,r.a.createElement("h1",null,g)))))),r.a.createElement(O,{markerAddress:w,marker:h,setShowMap:a})):r.a.createElement("div",{className:"flex justify-center items-center",style:{height:"calc(-176px + 100vh)"}},r.a.createElement(o.a,{type:"ThreeDots",color:"#b72b2b",height:40,width:40,visible:!s}))}},368:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return D}));var l=t(3),n=t.n(l),r=t(5),s=t(23),c=t(14),i=t(2),o=t(1),m=t.n(o),d=t(164),u=t(165),b=t(15),p=t.n(b),h=(t(36),t(21)),f=t(272),E=t(12),v=t(18),g=t(136),x=t.n(g),N=t(67);function y(e){var a=e.setShowMap,t=e.userAddresses,l=e.setSelectedAddress,n=e.selectedAddress,r=e.handleStepForward,s=Object(N.a)().formatMessage,c=m.a.useState(null),o=Object(i.a)(c,2),d=o[0],u=o[1],b={partial:{right:0,top:0,bottom:0,width:"20%"},full:{right:0,top:0,bottom:0,width:"100%"}};return m.a.createElement("div",{className:"min-h-full"},m.a.createElement("div",{className:" p-3 flex items-center justify-between bg-main-color text-main-text"},m.a.createElement("h1",{className:"text-lg"},s({id:"select-address-header"})),m.a.createElement("button",{onClick:r,className:"".concat(n?"bg-body-light text-main-color":"bg-gray-600 cursor-not-allowed"," rounded p-2 uppercase font-semibold "),disabled:!n},s({id:"btn-proceed"}))),m.a.createElement(E.b,null,m.a.createElement(E.c.div,{layout:!0,className:"p-3 locations-grid__desktop"},t.map((function(e){return console.log(e),m.a.createElement(E.c.div,{layout:!0,key:e.id,className:"".concat((null===n||void 0===n?void 0:n.id)===e.id&&"shadow-itemsSlider-shallow"," rounded border relative  bg-body-light")},m.a.createElement(E.c.div,{layout:!0},m.a.createElement("div",{style:{minHeight:"150px",position:"relative"}},m.a.createElement("img",{src:"https://maps.googleapis.com/maps/api/staticmap?center=".concat(e.lat,",").concat(e.lng,"&zoom=15&size=200x200&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg"),alt:"thumbnail"}),m.a.createElement(E.c.div,{variants:b,initial:"partial",animate:d===e.id?"full":"partial",layout:!0,exit:"partial",onClick:function(){return a=e.id,void u(d===a?null:a);var a},className:"absolute overflow-hidden p-2 text-main-text  transition cursor-pointer duration-150 opacity-50 bg-gray-800 hover:opacity-75"},m.a.createElement(v.m,{style:{left:"10px"},className:"absolute  top-1/2 transform  -translate-y-1/2  w-5 h-5"}),m.a.createElement(E.a,null,d===e.id&&m.a.createElement(E.c.div,{initial:{opacity:0},animate:{opacity:1,marginLeft:"35px"},exit:{opacity:0},layout:!0,className:"text-sm"},m.a.createElement("div",null,m.a.createElement("h1",null,s({id:"maps-detailed-address-apartment-short"}),":"),m.a.createElement("h1",null,e.apartment_house_number)),m.a.createElement("div",null,m.a.createElement("h1",null,s({id:"maps-detailed-address-building-short"}),":"),m.a.createElement("h1",null,e.building_tower_number)),m.a.createElement("div",null,m.a.createElement("h1",null,s({id:"maps-detailed-address-phone-short"}),":"),m.a.createElement("h1",null,e.phone_number)))))),m.a.createElement("div",{className:"p-2"},m.a.createElement("div",{className:"text-sm mb-2 font-semibold",style:{height:"65px"}},m.a.createElement("h1",null,e.marked_address)),m.a.createElement("button",{onClick:function(){return function(e){(null===n||void 0===n?void 0:n.id)===e.id?l(null):l(e)}(e)},className:"w-full p-1 rounded uppercase ".concat((null===n||void 0===n?void 0:n.id)===e.id?"bg-green-700 shadow":"bg-main-color"," text-main-text")},(null===n||void 0===n?void 0:n.id)===e.id?s({id:"selected-btn"}):s({id:"select-btn"})))))})),m.a.createElement("button",{onClick:function(){return a(!0)},className:"p-3 flex items-center justify-center self-center justify-self-center bg-main-color hover:bg-red-900 transition duration-150 relative rounded-lg text-main-text"},m.a.createElement(x.a,{background:!0}),m.a.createElement(v.p,{className:"h-8 w-8"})))))}function w(e){var a=e.handleStepForward,t=e.selectedAddress,l=e.setSelectedAddress,n=m.a.useState(!1),r=Object(i.a)(n,2),s=r[0],c=r[1],o=m.a.useContext(h.a),d=o.userAddresses;return o.userAddressesLoading?m.a.createElement("div",{className:"flex h-full justify-center items-center",style:{minHeight:"calc(100vh - 150px)"}},m.a.createElement(p.a,{type:"ThreeDots",color:"#b72b2b",height:40,width:40,visible:!0})):m.a.createElement("div",{className:"h-full",style:{minHeight:"calc(100vh - 150px)"}},0!==d.length&&!s&&m.a.createElement(y,{userAddresses:d,setShowMap:c,selectedAddress:t,setSelectedAddress:l,handleStepForward:a}),(0===d.length||s)&&m.a.createElement("div",{className:"rounded-sm border"},m.a.createElement(f.a,{setShowMap:c})))}var j=t(84),O=t(43),k=t(111),S=t.n(k),C=t(112),A=t.n(C),_=t(113),M=t.n(_);function z(e){var a=e.handleStepBack,t=e.selectedAddress,l=e.personalInfo,n=e.setPersonalInfo,r=e.paymentMethod,i=e.setPaymentMethod,o=e.handleCheckout,d=e.checkoutLoading,u=Object(N.a)().formatMessage,b=[{name:"K-net",photo:S.a},{name:"Visa ",photo:M.a},{name:"Master Card",photo:A.a}],h=function(e,a){n(Object(c.a)({},l,Object(s.a)({},a,e.target.value)))};return m.a.createElement("div",{className:"h-full  "},m.a.createElement("div",{className:" mb-2 border rounded-lg h-full  "},m.a.createElement("div",{className:"quick-checkout-personal-info__container p-2"},m.a.createElement("div",{className:"flex flex-col justify-center font-semibold text-sm  "},m.a.createElement("div",{className:" mb-4 relative  "},m.a.createElement("h1",null,u({id:"fullname-label"})),m.a.createElement("input",{className:" mt-1 w-full rounded border   p-2",type:"text",value:l.fullName,onChange:function(e){return h(e,"fullName")}})),m.a.createElement("div",{className:"relative  mb-4 "},m.a.createElement("h1",null,u({id:"phone-label"})),m.a.createElement("input",{className:" mt-1 w-full rounded border  p-2  ",type:"text",value:l.phoneNumber,onChange:function(e){return h(e,"phoneNumber")}})),m.a.createElement("div",{className:"relative  mb-4 "},m.a.createElement("h1",null,u({id:"selected-address"})),m.a.createElement("div",{className:"my-1 p-2 border rounded-lg flex"},m.a.createElement("div",{className:"flex-1"},m.a.createElement("div",{className:""},m.a.createElement("h1",{className:"text-gray-600"},u({id:"maps-detailed-address-street_neighborhood_governate"}),":"),m.a.createElement("h1",null,t.marked_address)),m.a.createElement("div",{className:""},m.a.createElement("h1",{className:"text-gray-600"},u({id:"maps-detailed-address-apartment"}),":"),m.a.createElement("h1",null,t.apartment_house_number)),m.a.createElement("div",{className:""},m.a.createElement("h1",{className:"text-gray-600"},u({id:"maps-detailed-address-building"})," ",":"," "),m.a.createElement("h1",null,t.building_tower_number)),m.a.createElement("div",{className:""},m.a.createElement("h1",{className:"text-gray-600"},u({id:"maps-details-extra-details"})," ",":"," "),m.a.createElement("h1",null,t.addition_direction||" - "))),m.a.createElement("div",null,m.a.createElement("img",{src:"https://maps.googleapis.com/maps/api/staticmap?center=".concat(t.lat,",").concat(t.lng,"&zoom=15&size=200x200&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg"),alt:"thumbnail"}))))),m.a.createElement("div",{className:"font-semibold self-start"},m.a.createElement("div",{className:" mb-4 relative  "},m.a.createElement("h1",{className:""},u({id:"select-payment-method"})),m.a.createElement("div",{className:"mt-1"},m.a.createElement("div",{className:"flex flex-col "},b.map((function(e,a){return m.a.createElement("button",{key:a,onClick:function(){return a=e.name,void i(a);var a},className:" ".concat(r===e.name&&"bg-btn-primary-light text-btn-secondary-light border-btn-primary-light"," mb-3 flex border items-center justify-start rounded p-2 font-semibold")},m.a.createElement("img",{className:"",src:e.photo,alt:e.name}),m.a.createElement("div",{className:"flex-1 mx-3 text-left"},e.name),m.a.createElement("div",null,r===e.name?m.a.createElement(O.f,{className:"w-6 h-6 text-btn-secondary-light"}):m.a.createElement(O.e,{className:"w-6 h-6 text-btn-primary-light"})))}))))))),m.a.createElement("hr",{className:"my-2"}),m.a.createElement("div",{className:"flex justify-end items-center p-2"},m.a.createElement("button",{className:"px-3 py-1 bg-main-color text-main-text rounded font-semibold",onClick:a},u({id:"btn-back-to-addresses"})),m.a.createElement("button",{className:"\n              \n             flex items-center justify-center bg-main-color text-main-text px-3 py-1 mx-3  rounded font-semibold",onClick:o},d?m.a.createElement(p.a,{type:"ThreeDots",color:"#fff",height:24,width:24,visible:!0}):u({id:"checkout"})))))}var q=t(28),T=t(8),H=t(17);function D(){var e=Object(T.b)(H.h,{throwOnError:!0}),a=Object(i.a)(e,2),t=a[0],l=a[1].isLoading,o=m.a.useContext(q.a).deliveryCountry,b=m.a.useState(0),p=Object(i.a)(b,2),h=p[0],f=p[1],E=m.a.useState(null),v=Object(i.a)(E,2),g=v[0],x=v[1],N=m.a.useState("K-net"),y=Object(i.a)(N,2),O=y[0],k=y[1],S=m.a.useState({fullName:"",phoneNumber:""}),C=Object(i.a)(S,2),A=C[0],_=C[1],M=m.a.useState({0:!1,1:!1,2:!1}),D=Object(i.a)(M,2),I=D[0],L=D[1],V=function(){var e=Object(r.a)(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={address:g.id,payment_method:"knet",order_type:"local"},e.prev=1,e.next=4,t({deliveryCountry:o,order:a});case 4:f(2),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return m.a.useEffect((function(){window.scrollTo(0,0)}),[h]),m.a.createElement(j.a,null,m.a.createElement("div",{className:"xxl:max-w-default md:max-w-screen-xl mx-auto"},m.a.createElement(u.a,{selectedStep:h,stepDone:I}),m.a.createElement("div",{className:"mb-3",style:{minHeight:"calc(100vh - 150px)"}},0===h&&m.a.createElement(w,{handleStepForward:function(){2!==h&&(f(h+1),L(Object(c.a)({},I,Object(s.a)({},h,!0))))},selectedAddress:g,setSelectedAddress:x}),1===h&&m.a.createElement(z,{handleStepBack:function(){0!==h&&(f(h-1),L(Object(c.a)({},I,Object(s.a)({},h-1,!1))))},personalInfo:A,setPersonalInfo:_,selectedAddress:g,paymentMethod:O,setPaymentMethod:k,handleCheckout:V,checkoutLoading:l}),2===h&&m.a.createElement(d.a,null))))}}}]);
//# sourceMappingURL=23.320fddf6.chunk.js.map