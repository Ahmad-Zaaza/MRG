(this.webpackJsonpattiahmall=this.webpackJsonpattiahmall||[]).push([[30],{307:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return O}));var n=a(16),l=a(103),r=a(2),i=a(1),c=a.n(i),u=a(66),o=a(10),s=a(32),d=a(156),m=a(170),f=a(69),p=a(17),v=a(5),b=a(148),g=a(101),h=a(149),y=a.n(h),E=a(104);function O(){var e,t,a=Object(s.i)().query,i=Object(u.a)(),h=i.locale,O=i.formatMessage,P=c.a.useState([]),N=Object(r.a)(P,2),C=N[0],j=N[1],w=c.a.useState({value:"newest",label:"Newest"}),S=Object(r.a)(w,2),x=S[0],k=S[1],L=c.a.useState(1),B=Object(r.a)(L,2),F=B[0],I=B[1],M=c.a.useState(1),q=Object(r.a)(M,2),A=q[0],D=q[1],J=c.a.useState(!1),R=Object(r.a)(J,2),T=R[0],W=R[1],_=c.a.useState([500]),Y=Object(r.a)(_,2),z=Y[0],G=Y[1],H=c.a.useState([]),K=Object(r.a)(H,2),Q=K[0],U=K[1],V=c.a.useState({label:20,value:20}),X=Object(r.a)(V,2),Z=X[0],$=X[1],ee=c.a.useState(!1),te=Object(r.a)(ee,2),ae=te[0],ne=te[1],le=c.a.useState(!1),re=Object(r.a)(le,2),ie=re[0],ce=re[1],ue=c.a.useState(!1),oe=Object(r.a)(ue,2),se=oe[0],de=oe[1],me=c.a.useState(!1),fe=Object(r.a)(me,2),pe=fe[0],ve=fe[1];c.a.useEffect((function(){var e=function(){window.scrollY>=200?ve(!0):ve(!1)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}})),c.a.useEffect((function(){ie&&setTimeout((function(){return ce(!1)}),100),se&&setTimeout((function(){return de(!1)}),100)}),[pe]);var be=Object(o.c)(["searchProducts",{query:a,page:F,resultsPerPage:Z}],p.O,{retry:!0,refetchOnWindowFocus:!1}),ge=be.data,he=be.isLoading,ye=Object(o.c)(["filtered-products",{search:a,brandFilters:C,sortBy:x,page:A,resultsPerPage:Z,locale:h,priceFilters:z}],p.m,{retry:!0,refetchOnWindowFocus:!1,enabled:T}),Ee=ye.data,Oe=ye.isLoading;c.a.useEffect((function(){0===Q.length?W(!1):W(!0)}),[Q]);return c.a.createElement(f.a,null,c.a.createElement("div",{className:"min-h-screen relative"},c.a.createElement(v.a,null,ae&&c.a.createElement(b.a,{key:"side-cart",setSideMenuOpen:ne}),ae&&c.a.createElement(v.c.div,{key:"sidecart-bg",initial:{opacity:0},animate:{opacity:.5},exit:{opacity:0},onClick:function(){return ne(!1)},className:"side__addCart-bg"})),!T&&(null===ge||void 0===ge?void 0:ge.products.length)>0&&!he||T&&(null===Ee||void 0===Ee?void 0:Ee.filteredProducts.length)>0&&!Oe?c.a.createElement("div",{className:"mb-1"},c.a.createElement("div",{className:"px-3 pt-3"},c.a.createElement("h1",{className:"font-semibold text-lg"},(null===ge||void 0===ge?void 0:ge.products.length)>2&&(null===ge||void 0===ge?void 0:ge.products.length)," ",function(){switch(null===ge||void 0===ge?void 0:ge.products.length){case 1:return O({id:"one-search-results"});case 2:return O({id:"two-search-results"});case(null===ge||void 0===ge?void 0:ge.products.length)>10:return O({id:"more-than-10-search-results"});default:return O({id:"search-results"})}}()," ",c.a.createElement("strong",null,a)))):null,c.a.createElement(v.b,null,c.a.createElement(v.c.div,{layout:!0,className:"px-3"},0!==Q.length&&c.a.createElement(c.a.Fragment,null,c.a.createElement(v.c.h1,{layout:!0,className:" mb-1 font-semibold"},O({id:"filtered-by"})," :"),c.a.createElement(v.c.div,{layout:!0,className:"flex items-center"},Q.map((function(e){return c.a.createElement(v.c.button,{layout:!0,className:"mx-1 py-1 px-3 bg-main-color text-main-text rounded-full",key:e.value,onClick:function(){return t=e,U((function(e){return e.filter((function(e){return e.value!==t.value}))})),"Brand"===t.type&&j((function(e){return e.filter((function(e){return e.label!==t.value}))})),"Sort"===t.type&&k({value:"newest",label:"Newest"}),void("Price"===t.type&&U((function(e){return e.filter((function(e){return"Price"!==e.type}))})));var t}},O({id:e.type})," : ",e.value)})))))),c.a.createElement("hr",{className:"my-3"}),c.a.createElement(d.a,{products:null===ge||void 0===ge?void 0:ge.products,productsLoading:he,setCartMenuOpen:ne,filteredProducts:null===Ee||void 0===Ee?void 0:Ee.filteredProducts,filteredProductsLoading:Oe,setProductsPage:I,filtersApplied:T,handleResultPerPageChange:function(e){$(e)}}),!T&&(null===ge||void 0===ge||null===(e=ge.products)||void 0===e?void 0:e.length)>0&&!he||T&&(null===Ee||void 0===Ee||null===(t=Ee.filteredProducts)||void 0===t?void 0:t.length)>0&&!Oe?c.a.createElement(y.a,{previousLabel:"ar"===h?c.a.createElement(E.b,{className:"w-6 h-6 inline"}):c.a.createElement(E.a,{className:"w-6 h-6 inline"}),nextLabel:"ar"===h?c.a.createElement(E.a,{className:"w-6 h-6 inline"}):c.a.createElement(E.b,{className:"w-6 h-6 inline"}),breakLabel:"...",breakClassName:"inline",pageCount:T?null===Ee||void 0===Ee?void 0:Ee.lastPage:null===ge||void 0===ge?void 0:ge.lastPage,marginPagesDisplayed:2,pageRangeDisplayed:2,initialPage:T?A-1:F-1,disableInitialCallback:!0,onPageChange:T?function(e){Object(g.a)(document.getElementById("main"),document.body),D(e.selected+1)}:function(e){Object(g.a)(document.getElementById("main"),document.body),I(e.selected+1)},containerClassName:"text-center my-2",subContainerClassName:"p-3 inline",pageLinkClassName:"p-3",activeClassName:"bg-main-color font-bold text-main-text",pageClassName:" inline-block mx-2 rounded-full text-lg",previousClassName:"p-3 inline font-bold",nextClassName:"p-3 inline font-bold",disabledClassName:"text-gray-500"}):null,c.a.createElement(v.a,null,pe&&0!==(null===ge||void 0===ge?void 0:ge.products.length)&&c.a.createElement(m.a,{productsLoading:he,products:null===ge||void 0===ge?void 0:ge.products,brandFilters:C,handleBrandChange:function(e){C.find((function(t){return t.id===e.id}))?(j((function(t){return t.filter((function(t){return t.id!==e.id}))})),U((function(t){return t.filter((function(t){return t.value!==e.label}))}))):(U((function(t){return[].concat(Object(l.a)(t),[{type:"Brand",value:e.label}])})),j((function(t){return[].concat(Object(l.a)(t),[Object(n.a)({},e)])})))},filtersApplied:T,setSortByOpen:ce,setFiltersOpen:de,filtersOpen:se,sortByOpen:ie,sortBy:x,handleSortByChange:function(e){if("newest"===e.value)return U((function(e){return e.filter((function(e){return"Sort"!==e.type}))})),void k(e);U((function(t){var a=t.filter((function(e){return"Sort"!==e.type}));return a.push({type:"Sort",value:e.label}),a})),k(e)},handleChangePriceInput:function(e){e.target.value<0||e.target.value>1e4||G([e.target.value])},handlePriceChange:function(e){G(e)},handleSubmitPrice:function(){U((function(e){var t=e.filter((function(e){return"Price"!==e.type}));return t.push({type:"Price",value:"Max ".concat(z[0])}),t}))},priceFilters:z}))))}}}]);
//# sourceMappingURL=30.ae5f7217.chunk.js.map