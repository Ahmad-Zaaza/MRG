(this.webpackJsonpattiahmall=this.webpackJsonpattiahmall||[]).push([[24],{272:function(e,a,t){"use strict";t.d(a,"a",(function(){return q}));var l=t(2),n=t(1),r=t.n(n),s=t(7),c=t.n(s),i=t(15),m=t.n(i),o=(t(36),t(144)),d=t(105),u=t(145),b=t(59),p=t(32),h=t(3),f=t.n(h),E=t(14),v=t(5),g=t(25),x=t(67),N=t(19),y=t(50),w=t(21),j=[{value:"+965",label:"+965"},{value:"+966",label:"+966"}];function O(e){var a=e.markerAddress,t=e.setShowMap,n=e.marker,s=r.a.useState(j[0]),c=Object(l.a)(s,2),i=c[0],o=c[1],d=r.a.useContext(w.a).addAddressMutation,u=Object(x.a)().formatMessage,b=r.a.useState(!1),p=Object(l.a)(b,2),h=p[0],y=p[1],O=N.b({apartmentOrHouseNumber:N.a().required(u({id:"required-field"})),buildingOrTowerNumber:N.a().required(u({id:"required-field"})),addressName:N.d().required(u({id:"required-field"})),phoneNumber:N.d().matches(/^\d+$/,u({id:"number-only"})).required(u({id:"required-field"})),additionalDetails:N.d()});return r.a.createElement("div",null,r.a.createElement("div",{className:"font-bold p-2"},r.a.createElement("h1",null,u({id:"location-details"}))),r.a.createElement("div",{className:"p-2"},r.a.createElement(g.a,{initialValues:{apartmentOrHouseNumber:"",buildingOrTowerNumber:"",phoneNumber:"",additionalDetails:"",addressName:""},validationSchema:O,onSubmit:function(){var e=Object(v.a)(f.a.mark((function e(l){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d({lat:n.lat,lng:n.lng,defaultLocation:h,addressDetails:Object(E.a)({phoneNumber:"".concat(i.value).concat(l.phoneNumber)},l,{markerAddress:a})});case 3:t(!1),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.response);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a){return e.apply(this,arguments)}}()},(function(e){var t=e.handleSubmit,l=e.values,n=e.isSubmitting;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",{className:"grid grid-cols-2 gap-1"},r.a.createElement(k,{label:u({id:"maps-detailed-address-apartment"}),name:"apartmentOrHouseNumber",value:l.apartmentOrHouseNumber,type:"text"}),r.a.createElement(k,{label:u({id:"maps-detailed-address-building"}),name:"buildingOrTowerNumber",value:l.buildingOrTowerNumber,type:"text"})),r.a.createElement(k,{label:u({id:"maps-detailed-address-name"}),name:"addressName",value:l.addressName,type:"text"}),r.a.createElement(S,{label:u({id:"maps-details-extra-details"}),name:"additionalDetails",value:l.additionalDetails}),r.a.createElement(C,{label:u({id:"maps-detailed-address-phone"}),name:"phoneNumber",value:l.phoneNumber,type:"text",countryCode:i,setCountryCode:o}),r.a.createElement("div",{className:" "},r.a.createElement("div",{className:"flex items-center mb-2"},r.a.createElement("label",null,u({id:"mark-as-default"})),r.a.createElement("input",{className:" mx-2",type:"checkbox",checked:h,onChange:function(){return y(!h)}})),r.a.createElement("button",{type:"submit",disabled:!a,className:"".concat(a?n?"bg-gray-300 text-main-text":"bg-main-color text-main-text":"btn-disabled","   p-2 rounded  w-full  flex items-center justify-center font-semibold")},n?r.a.createElement(m.a,{type:"ThreeDots",color:"#b72b2b",height:20,width:20,visible:n}):r.a.createElement("h1",null,u({id:"confirm-location"})))))}))))}var k=function(e){var a=e.label,t=(e.value,e.name),n=Object(p.a)(e,["label","value","name"]),s=Object(g.b)(t),c=Object(l.a)(s,2),i=c[0],m=c[1];return r.a.createElement("div",{className:"w-full mb-1 relative"},r.a.createElement("label",{htmlFor:t,className:"text-sm font-semibold text-gray-700"},a),r.a.createElement("input",Object.assign({},i,n,{onBlur:function(e){i.onBlur(e)},className:" w-full rounded-sm border   p-1"})),m.touched&&m.error?r.a.createElement("h1",{className:"text-xs text-main-color mt-1"},m.error):r.a.createElement("h1",{className:"text-xs text-main-color mt-1",style:{height:"18px"}}," "))},S=function(e){var a=e.label,t=(e.value,e.name),n=Object(p.a)(e,["label","value","name"]),s=Object(g.b)(t),c=Object(l.a)(s,1)[0],i=Object(x.a)().formatMessage;return r.a.createElement("div",{className:"w-full mb-1 relative"},r.a.createElement("div",{className:"flex items-center"},r.a.createElement("label",{htmlFor:t,className:"text-sm font-semibold text-gray-700"},a),r.a.createElement("h1",{className:"text-xs italic mx-3"},"(",i({id:"maps-details-optional"}),")")),r.a.createElement("textarea",Object.assign({rows:3},c,n,{onBlur:function(e){c.onBlur(e)},className:" w-full rounded-sm border   p-1"})))},C=function(e){var a=e.label,t=(e.value,e.name),n=e.countryCode,s=e.setCountryCode,c=Object(p.a)(e,["label","value","name","countryCode","setCountryCode"]),i=Object(g.b)(t),m=Object(l.a)(i,2),o=m[0],d=m[1];return r.a.createElement("div",{className:"w-full mb-1 flex flex-col "},r.a.createElement("label",{htmlFor:t,className:"text-sm font-semibold text-gray-800 mb-1"},a),r.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"0.4fr 1fr",gap:"0.5rem"}},r.a.createElement(y.a,{options:j,isSearchable:!1,value:n,onChange:s,styles:{dropdownIndicator:function(e){return Object(E.a)({},e,{padding:"0.25rem"})},valueContainer:function(e){return Object(E.a)({},e,{padding:"0.5rem"})}}}),r.a.createElement("input",Object.assign({},o,c,{onBlur:function(e){o.onBlur(e)},className:" border rounded w-full p-2 ".concat(d.error&&"border-main-color")}))),d.touched&&d.error?r.a.createElement("h1",{className:"text-xs text-main-color mt-1"},d.error):r.a.createElement("h1",{className:"text-xs text-main-color mt-1",style:{height:"18px"}}," "))},A=["places"],_={lat:29.3759,lng:47.9774},z={styles:o.a,disableDefaultUI:!0,zoomControl:!0};function q(e){var a=e.setShowMap,t=Object(b.useMediaQuery)({query:"(min-width: 768px)"}),n=Object(d.d)({googleMapsApiKey:"AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg",libraries:A}),s=n.isLoaded,i=n.loadError,o=r.a.useState(null),p=Object(l.a)(o,2),h=p[0],f=p[1],E=r.a.useState(null),v=Object(l.a)(E,2),g=v[0],x=v[1],N=r.a.useState(null),y=Object(l.a)(N,2),w=y[0],j=y[1],k=r.a.useRef(),S=r.a.useCallback((function(e){k.current=e}),[]),C=r.a.useCallback((function(e){var a=e.lat,t=e.lng;k.current.panTo({lat:a,lng:t}),f({lat:a,lng:t}),x(null)}),[]);return r.a.useEffect((function(){h&&c.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(h.lat,",").concat(h.lng,"&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg")).then((function(e){console.log(e.data),j("".concat(e.data.results[0].formatted_address)),x("".concat(e.data.results[0].address_components.map((function(e){return e.short_name})).join(", ")))})).catch((function(e){return console.log(e)}))}),[h]),i?r.a.createElement("div",{className:"flex justify-center items-center",style:{height:"calc(-173px + 100vh)"}},r.a.createElement("h1",null,"There was an Error loading maps, Please try again ")):s?r.a.createElement("div",{className:"".concat(t?"my-addresses-desktop-maps__grid":"my-addresses-mobile-maps__grid")},r.a.createElement("div",{className:"relative h-full"},r.a.createElement(u.a,{panTo:C,markerAddress:w}),r.a.createElement(d.a,{mapContainerStyle:{width:"100%",height:t?"100%":"500px"},zoom:15,center:_,options:z,clickableIcons:!1,onLoad:S,onClick:function(e){f({lat:e.latLng.lat(),lng:e.latLng.lng()})}},h&&r.a.createElement(d.c,{position:{lat:h.lat,lng:h.lng}}),g&&r.a.createElement(d.b,{onCloseClick:function(){return x(null)},position:{lat:h.lat,lng:h.lng},options:{pixelOffset:new window.google.maps.Size(0,-50)}},r.a.createElement("div",{className:"p-2"},r.a.createElement("div",null,r.a.createElement("h1",null,g)))))),r.a.createElement(O,{markerAddress:w,marker:h,setShowMap:a})):r.a.createElement("div",{className:"flex justify-center items-center",style:{height:"calc(-176px + 100vh)"}},r.a.createElement(m.a,{type:"ThreeDots",color:"#b72b2b",height:40,width:40,visible:!s}))}},369:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return I}));var l=t(3),n=t.n(l),r=t(5),s=t(23),c=t(14),i=t(2),m=t(1),o=t.n(m),d=t(166),u=t(43),b=t(67),p=t(111),h=t.n(p),f=t(112),E=t.n(f),v=t(113),g=t.n(v),x=t(15),N=t.n(x);t(36);function y(e){var a=e.handleStepBack,t=e.personalInfo,l=e.setPersonalInfo,n=e.selectedAddress,r=e.handleCheckout,m=e.checkoutLoading,d=Object(b.a)().formatMessage,p=[{name:"K-net",photo:h.a},{name:"Visa ",photo:g.a},{name:"Master Card",photo:E.a}],f=o.a.useState("K-net"),v=Object(i.a)(f,2),x=v[0],y=v[1],w=function(e,a){l(Object(c.a)({},t,Object(s.a)({},a,e.target.value)))};return o.a.createElement("div",{className:"h-full  "},o.a.createElement("div",{className:" mb-2 border h-full  "},o.a.createElement("div",{className:"quick-checkout-personal-info-mobile__container p-2"},o.a.createElement("div",{className:"flex flex-col justify-center font-semibold text-sm  "},o.a.createElement("div",{className:" mb-4 relative  "},o.a.createElement("h1",null,d({id:"fullname-label"})),o.a.createElement("input",{className:" mt-1 w-full rounded border   p-2",type:"text",value:t.fullName,onChange:function(e){return w(e,"fullName")}})),o.a.createElement("div",{className:"relative  mb-4 "},o.a.createElement("h1",null,d({id:"phone-label"})),o.a.createElement("input",{className:" mt-1 w-full rounded border  p-2  ",type:"text",value:t.lastName,onChange:function(e){return w(e,"phoneNumber")}})),o.a.createElement("div",{className:"relative  mb-4 "},o.a.createElement("h1",null,d({id:"selected-address"})),o.a.createElement("div",{className:"my-1 p-2 border rounded-lg flex"},o.a.createElement("div",{className:"flex-1"},o.a.createElement("div",{className:""},o.a.createElement("h1",{className:"text-gray-600"},d({id:"maps-detailed-address-street_neighborhood_governate"}),":"),o.a.createElement("h1",null,n.marked_address)),o.a.createElement("div",{className:""},o.a.createElement("h1",{className:"text-gray-600"},d({id:"maps-detailed-address-apartment"}),":"),o.a.createElement("h1",null,n.apartment_house_number)),o.a.createElement("div",{className:""},o.a.createElement("h1",{className:"text-gray-600"},d({id:"maps-detailed-address-building"})," ",":"," "),o.a.createElement("h1",null,n.building_tower_number)),o.a.createElement("div",{className:""},o.a.createElement("h1",{className:"text-gray-600"},d({id:"maps-details-extra-details"})," ",":"," "),o.a.createElement("h1",null,n.addition_direction||" - "))),o.a.createElement("div",null,o.a.createElement("img",{src:"https://maps.googleapis.com/maps/api/staticmap?center=".concat(n.lat,",").concat(n.lng,"&zoom=15&size=200x200&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg"),alt:"thumbnail"}))))),o.a.createElement("div",{className:"font-semibold self-start"},o.a.createElement("div",{className:" mb-4 relative  "},o.a.createElement("h1",{className:""}," ",d({id:"select-payment-method"})),o.a.createElement("div",{className:"mt-1"},o.a.createElement("div",{className:"flex flex-col "},p.map((function(e,a){return o.a.createElement("button",{key:a,onClick:function(){return a=e.name,void y(a);var a},className:" ".concat(x===e.name&&"bg-btn-primary-light text-btn-secondary-light border-btn-primary-light"," mb-3 flex border items-center justify-start rounded p-2 font-semibold")},o.a.createElement("img",{className:" mr-3",src:e.photo,alt:e.name}),o.a.createElement("div",{className:"flex-1 text-left"},e.name),o.a.createElement("div",null,x===e.name?o.a.createElement(u.f,{className:"w-6 h-6 text-btn-secondary-light"}):o.a.createElement(u.e,{className:"w-6 h-6 text-btn-primary-light"})))}))))))),o.a.createElement("div",{className:"flex justify-end items-center p-2"},o.a.createElement("button",{className:"px-3 py-1 bg-main-color text-main-text rounded font-semibold mr-3",onClick:a},d({id:"btn-back-to-addresses"})),o.a.createElement("button",{className:"px-3 py-1 bg-main-color text-main-text rounded font-semibold",onClick:r},m?o.a.createElement(N.a,{type:"ThreeDots",color:"#fff",height:24,width:24,visible:!0}):d({id:"checkout"})))))}var w=t(167),j=t(84),O=t(21),k=t(272),S=t(12),C=t(18),A=t(136),_=t.n(A);function z(e){var a=e.userAddresses,t=e.setShowMap,l=e.selectedAddress,n=e.setSelectedAddress,r=e.handleStepForward,s=Object(b.a)().formatMessage,c=o.a.useState(null),m=Object(i.a)(c,2),d=m[0],u=m[1],p={partial:{right:0,top:0,bottom:0,width:"20%"},full:{right:0,top:0,bottom:0,width:"100%"}};return o.a.createElement("div",{className:"min-h-full"},o.a.createElement("div",{className:" p-2 flex items-center justify-between bg-main-color text-main-text"},o.a.createElement("h1",{className:"text-sm font-semibold"},s({id:"select-address-header"})),o.a.createElement("button",{onClick:r,className:"".concat(l?"bg-body-light text-main-color":"bg-gray-600 cursor-not-allowed"," rounded p-1 text-xs uppercase font-semibold "),disabled:!l},s({id:"btn-proceed"}))),o.a.createElement(S.b,null,o.a.createElement(S.c.div,{layout:!0,className:"p-2 locations-grid__mobile"},a.map((function(e){return o.a.createElement(S.c.div,{layout:!0,key:e.id,className:"".concat((null===l||void 0===l?void 0:l.id)===e.id&&"shadow-itemsSlider-shallow"," rounded border relative  bg-body-light")},o.a.createElement(S.c.div,{layout:!0},o.a.createElement("div",{style:{position:"relative"}},o.a.createElement("img",{src:"https://maps.googleapis.com/maps/api/staticmap?center=".concat(e.lat,",").concat(e.lng,"&zoom=15&size=350x250&key=").concat("AIzaSyAYprqr3Vrnmhwx9UQozUNNks7CVH9m3Xg"),alt:"thumbnail"}),o.a.createElement(S.c.div,{variants:p,initial:"partial",animate:d===e.id?"full":"partial",layout:!0,exit:"partial",onClick:function(){return a=e.id,void u(d===a?null:a);var a},className:"absolute overflow-hidden p-2 text-main-text  transition cursor-pointer duration-150 opacity-75 bg-gray-800"},o.a.createElement(C.m,{style:{left:"10px"},className:"absolute  top-1/2 transform  -translate-y-1/2  w-5 h-5"}),o.a.createElement(S.a,null,d===e.id&&o.a.createElement(S.c.div,{initial:{opacity:0},animate:{opacity:1,marginLeft:"35px"},exit:{opacity:0},layout:!0,className:"text-xs"},o.a.createElement("div",null,o.a.createElement("h1",null,s({id:"maps-detailed-address-apartment-short"}),":"),o.a.createElement("h1",null,e.apartment_house_number)),o.a.createElement("div",null,o.a.createElement("h1",null,s({id:"maps-detailed-address-building-short"}),":"),o.a.createElement("h1",null,e.building_tower_number)),o.a.createElement("div",null,o.a.createElement("h1",null,s({id:"maps-detailed-address-phone-short"}),":"),o.a.createElement("h1",null,e.phone_number)))))),o.a.createElement("div",{className:"p-1"},o.a.createElement("div",{className:"text-xs mb-2 font-semibold",style:{height:"50px"}},o.a.createElement("h1",null,e.marked_address)),o.a.createElement("button",{onClick:function(){return function(e){(null===l||void 0===l?void 0:l.id)===e.id?n(null):n(e)}(e)},className:"w-full text-sm p-1 rounded uppercase ".concat((null===l||void 0===l?void 0:l.id)===e.id?"bg-green-700 shadow":"bg-main-color"," text-main-text")},(null===l||void 0===l?void 0:l.id)===e.id?s({id:"selected-btn"}):s({id:"select-btn"})))))})),o.a.createElement("div",{className:"p-3 flex items-center justify-center "},o.a.createElement("button",{onClick:function(){return t(!0)},className:"p-3 flex items-center justify-center place-self-center justify-self-center bg-main-color hover:bg-red-900 transition duration-150 relative rounded-lg text-main-text"},o.a.createElement(_.a,{background:!0}),o.a.createElement(C.p,{className:"h-8 w-8"}))))))}function q(e){var a=e.handleStepForward,t=e.selectedAddress,l=e.setSelectedAddress,n=o.a.useState(!1),r=Object(i.a)(n,2),s=r[0],c=r[1],m=o.a.useContext(O.a),d=m.userAddresses;return m.userAddressesLoading?o.a.createElement("div",{className:"flex h-full justify-center items-center",style:{minHeight:"calc(100vh - 102px)"}},o.a.createElement(N.a,{type:"ThreeDots",color:"#b72b2b",height:40,width:40,visible:!0})):o.a.createElement("div",{className:"h-full"},0!==d.length&&!s&&o.a.createElement(z,{userAddresses:d,setShowMap:c,selectedAddress:t,setSelectedAddress:l,handleStepForward:a}),(0===d.length||s)&&o.a.createElement("div",{className:" border mb-2 h-full"},o.a.createElement(k.a,{setShowMap:c,handleStepForward:a})))}var M=t(28),T=t(17),D=t(8);function I(){var e=o.a.useContext(M.a).deliveryCountry,a=o.a.useState(0),t=Object(i.a)(a,2),l=t[0],m=t[1],u=o.a.useState(null),b=Object(i.a)(u,2),p=b[0],h=b[1],f=o.a.useState({fullName:"",phoneNumber:""}),E=Object(i.a)(f,2),v=E[0],g=E[1],x=Object(D.b)(T.h,{throwOnError:!0}),N=Object(i.a)(x,2),O=N[0],k=N[1].isLoading,S=o.a.useState({0:!1,1:!1,2:!1}),C=Object(i.a)(S,2),A=C[0],_=C[1],z=function(){var a=Object(r.a)(n.a.mark((function a(){var t;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t={address:p.id,payment_method:"knet",order_type:"local"},a.prev=1,a.next=4,O({deliveryCountry:e,order:t});case 4:m(2),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1),console.log(a.t0.response);case 10:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(){return a.apply(this,arguments)}}();return o.a.useEffect((function(){window.scrollTo(0,0)}),[l]),o.a.createElement(j.a,null,o.a.createElement("div",{className:"xxl:max-w-default md:max-w-screen-xl mx-auto"},o.a.createElement(w.a,{selectedStep:l,stepDone:A}),o.a.createElement("div",{className:"mb-3",style:{minHeight:"calc(100vh - 150px)"}},0===l&&o.a.createElement(q,{handleStepForward:function(){2!==l&&(m(l+1),_(Object(c.a)({},A,Object(s.a)({},l,!0))))},selectedAddress:p,setSelectedAddress:h}),1===l&&o.a.createElement(y,{handleStepBack:function(){0!==l&&(m(l-1),_(Object(c.a)({},A,Object(s.a)({},l-1,!1))))},selectedAddress:p,personalInfo:v,setPersonalInfo:g,handleCheckout:z,checkoutLoading:k}),2===l&&o.a.createElement(d.a,null))))}}}]);
//# sourceMappingURL=24.b5d5e8dd.chunk.js.map