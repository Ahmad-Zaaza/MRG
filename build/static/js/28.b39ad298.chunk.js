(this.webpackJsonpattiahmall=this.webpackJsonpattiahmall||[]).push([[28],{317:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return N}));var n=a(16),l=a(77),r=a(2),i=a(1),c=a.n(i),u=a(63),o=a(10),s=a(34),d=a(162),m=a(176),f=a(82),b=a(17),p=a(5),v=a(150),g=a(157),h=a(135),y=a(151),O=a.n(y),E=a(138),P=a(46);function N(){var e,t,a,i,y=Object(s.i)().query,N=Object(u.a)(),C=N.locale,j=N.formatMessage,x=c.a.useState([]),S=Object(r.a)(x,2),w=S[0],k=S[1],B=c.a.useState({value:"newest",label:"Newest"}),L=Object(r.a)(B,2),F=L[0],M=L[1],I=c.a.useState(1),R=Object(r.a)(I,2),q=R[0],A=R[1],D=c.a.useState(1),J=Object(r.a)(D,2),W=J[0],_=J[1],z=c.a.useState(!1),G=Object(r.a)(z,2),H=G[0],K=G[1],Q=c.a.useState([500]),T=Object(r.a)(Q,2),U=T[0],V=T[1],X=c.a.useState([]),Y=Object(r.a)(X,2),Z=Y[0],$=Y[1],ee=c.a.useState({label:20,value:20}),te=Object(r.a)(ee,2),ae=te[0],ne=te[1],le=c.a.useState(!1),re=Object(r.a)(le,2),ie=re[0],ce=re[1],ue=c.a.useState(!1),oe=Object(r.a)(ue,2),se=oe[0],de=oe[1],me=c.a.useState(!1),fe=Object(r.a)(me,2),be=fe[0],pe=fe[1],ve=Object(g.a)(),ge=Object(r.a)(ve,2),he=ge[0],ye=ge[1],Oe=Object(o.c)(["searchProducts",{query:y,page:q,resultsPerPage:ae}],b.M,{retry:!0,refetchOnWindowFocus:!1}),Ee=Oe.data,Pe=Oe.isLoading,Ne=Object(o.c)(["filtered-products",{search:y,brandFilters:w,sortBy:F,page:W,resultsPerPage:ae,locale:C,priceFilters:U}],b.l,{retry:!0,refetchOnWindowFocus:!1,enabled:H}),Ce=Ne.data,je=Ne.isLoading,xe=function(e){ne(e)};c.a.useEffect((function(){0===Z.length?K(!1):K(!0)}),[Z]);var Se=c.a.useMemo((function(){return[{label:20,value:20},{label:30,value:30},{label:40,value:40}]}),[]);return c.a.createElement(f.a,null,c.a.createElement("div",{className:"min-h-screen relative"},c.a.createElement(p.a,null,ie&&c.a.createElement(v.a,{key:"side-cart",setSideMenuOpen:ce}),ie&&c.a.createElement(p.c.div,{key:"sidecart-bg",initial:{opacity:0},animate:{opacity:.5},exit:{opacity:0},onClick:function(){return ce(!1)},className:"side__addCart-bg"})),!H&&(null===Ee||void 0===Ee||null===(e=Ee.products)||void 0===e?void 0:e.length)>0&&!Pe||H&&(null===Ce||void 0===Ce||null===(t=Ce.filteredProducts)||void 0===t?void 0:t.length)>0&&!je&&c.a.createElement("div",{className:"border-b mb-1"},c.a.createElement("div",{className:"p-3 "},c.a.createElement("h1",null,(null===Ee||void 0===Ee?void 0:Ee.products.length)>2&&(null===Ee||void 0===Ee?void 0:Ee.products.length)," ",function(){switch(null===Ee||void 0===Ee?void 0:Ee.products.length){case 1:return j({id:"one-search-results"});case 2:return j({id:"two-search-results"});case(null===Ee||void 0===Ee?void 0:Ee.products.length)>10:return j({id:"more-than-10-search-results"});default:return j({id:"search-results"})}}()," ",c.a.createElement("strong",null,y))),c.a.createElement("div",{className:"flex items-center"},c.a.createElement("h1",{className:"font-semibold text-sm"},j({id:"number-per-page"})),c.a.createElement(P.a,{isSearchable:!1,options:Se,value:ae,onChange:xe,className:"mx-2 flex-1"}))),c.a.createElement(p.b,null,c.a.createElement(p.c.div,{layout:!0,className:"px-3"},0!==Z.length&&c.a.createElement(c.a.Fragment,null,c.a.createElement(p.c.h1,{layout:!0,className:" mb-1 font-semibold"},j({id:"filtered-by"})," :"),c.a.createElement(p.c.div,{layout:!0,className:"flex items-center"},Z.map((function(e){return c.a.createElement(p.c.button,{layout:!0,className:"mx-1 py-1 px-3 bg-main-color text-main-text rounded-full",key:e.value,onClick:function(){return t=e,$((function(e){return e.filter((function(e){return e.value!==t.value}))})),"Brand"===t.type&&k((function(e){return e.filter((function(e){return e.label!==t.value}))})),"Sort"===t.type&&M({value:"newest",label:"Newest"}),void("Price"===t.type&&$((function(e){return e.filter((function(e){return"Price"!==e.type}))})));var t}},j({id:e.type})," : ",e.value)}))),c.a.createElement("hr",{className:"my-3"})))),c.a.createElement(d.a,{products:null===Ee||void 0===Ee?void 0:Ee.products,productsLoading:Pe,setCartMenuOpen:ce,filteredProducts:null===Ce||void 0===Ce?void 0:Ce.filteredProducts,filteredProductsLoading:je,triggerRef:he,setProductsPage:A,filtersApplied:H,handleResultPerPageChange:xe}),!H&&(null===Ee||void 0===Ee||null===(a=Ee.products)||void 0===a?void 0:a.length)>0&&!Pe||H&&(null===Ce||void 0===Ce||null===(i=Ce.filteredProducts)||void 0===i?void 0:i.length)>0&&!je&&c.a.createElement(O.a,{previousLabel:c.a.createElement(E.a,{className:"w-6 h-6 inline"}),nextLabel:c.a.createElement(E.b,{className:"w-6 h-6 inline"}),breakLabel:"...",breakClassName:"inline",pageCount:H?null===Ce||void 0===Ce?void 0:Ce.lastPage:null===Ee||void 0===Ee?void 0:Ee.lastPage,marginPagesDisplayed:2,pageRangeDisplayed:2,initialPage:H?W-1:q-1,disableInitialCallback:!0,onPageChange:H?function(e){Object(h.a)(document.getElementById("main"),document.body),_(e.selected+1)}:function(e){Object(h.a)(document.getElementById("main"),document.body),A(e.selected+1)},containerClassName:"text-center my-2",subContainerClassName:"p-3 inline",pageLinkClassName:"p-3",activeClassName:"bg-main-color font-bold text-main-text",pageClassName:" inline-block mx-2 rounded-full text-lg",previousClassName:"p-3 inline font-bold",nextClassName:"p-3 inline font-bold",disabledClassName:"text-gray-500"}),c.a.createElement(p.a,null,ye&&c.a.createElement(m.a,{productsLoading:Pe,products:null===Ee||void 0===Ee?void 0:Ee.products,brandFilters:w,handleBrandChange:function(e){w.find((function(t){return t.id===e.id}))?(k((function(t){return t.filter((function(t){return t.id!==e.id}))})),$((function(t){return t.filter((function(t){return t.value!==e.label}))}))):($((function(t){return[].concat(Object(l.a)(t),[{type:"Brand",value:e.label}])})),k((function(t){return[].concat(Object(l.a)(t),[Object(n.a)({},e)])})))},filtersApplied:H,setSortByOpen:de,setFiltersOpen:pe,filtersOpen:be,sortByOpen:se,sortBy:F,handleSortByChange:function(e){if("newest"===e.value)return $((function(e){return e.filter((function(e){return"Sort"!==e.type}))})),void M(e);$((function(t){var a=t.filter((function(e){return"Sort"!==e.type}));return a.push({type:"Sort",value:e.label}),a})),M(e)},handleChangePriceInput:function(e){e.target.value<0||e.target.value>1e4||V([e.target.value])},handlePriceChange:function(e){V(e)},handleSubmitPrice:function(){$((function(e){var t=e.filter((function(e){return"Price"!==e.type}));return t.push({type:"Price",value:"Max ".concat(U[0])}),t}))},priceFilters:U}))))}}}]);
//# sourceMappingURL=28.b39ad298.chunk.js.map